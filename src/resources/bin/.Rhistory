opt <- list(input="/home/alaimos/repos/sciki/src/storage/app/public/simulations/10/correlations/e01ea3113f40a4cb61a9d483f77284ba/data.csv",output="/home/alaimos/repos/sciki/src/storage/app/public/simulations/10/correlations/e01ea3113f40a4cb61a9d483f77284ba/output.csv")
table <- read.table(opt$input, header = TRUE, sep = "\t", row.names = 1)
View(table)
table <- read.table(opt$input, header = TRUE, sep = "\t", row.names = 1, check.names = FALSE)
rm(table)
input.table <- read.table(opt$input, header = TRUE, sep = "\t", row.names = 1, check.names = FALSE)
apply(input.table, 2, function (x) (all(x == 0)))
input.table[,!apply(input.table, 2, function (x) (all(x == 0)))]
input.table <- input.table[,!apply(input.table, 2, function (x) (all(x == 0)))]
View(input.table)
first.simulation <- input.table[1,]
first.simulation <- as.vector(input.table[1,])
first.simulation <- as.numeric(input.table[1,])
first.simulation
other.simulations <- input.table[-1,]
apply(other.simulations, 1, function (y) (raw.corr(first.simulation, y)))
raw.corr <- function (x, y) {
xm <- mean(x)
ym <- mean(y)
x  <- x - xm
y  <- y - ym
sp <- sqrt(sum(x ^ 2)) * sqrt(sum(y ^ 2))
a <- sum(x * y)
return ((a / sp))
}
apply(other.simulations, 1, function (y) (raw.corr(first.simulation, y)))
opt <- list(input="/home/alaimos/repos/sciki/src/storage/app/public/simulations/10/correlations/e01ea3113f40a4cb61a9d483f77284ba/data.csv",output="/home/alaimos/repos/sciki/src/storage/app/public/simulations/10/correlations/e01ea3113f40a4cb61a9d483f77284ba/output.csv", correlation="pearson")
result <- apply(other.simulations, 1, function (y) (cor(first.simulation, y, method = "spearman")))
result
if (opt$correlation == "spearman") {
result <- apply(other.simulations, 1, function (y) (cor(first.simulation, y, method = "spearman")))
} else {
result <- apply(other.simulations, 1, function (y) (raw.corr(first.simulation, y)))
}
df.output <- data.frame(simulation=names(result), correlation=unname(result))
df.output
write.table(df.output, file = opt$output, append = FAPSE, quote = FALSE, sep = "\t")
write.table(df.output, file = opt$output, append = FALSE, quote = FALSE, sep = "\t")
write.table(df.output, file = opt$output, append = FALSE, quote = FALSE, sep = "\t", col.names = FALSE, row.names = FALSE)
