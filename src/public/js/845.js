(self.webpackChunk=self.webpackChunk||[]).push([[845],{73684:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var a=n(67294),r=n(88129),l=n.n(r),c=n(7143),s=n(94184),o=n.n(s),m=function(){return(m=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},i=function(e,t,n,a){return new(n||(n=Promise))((function(r,l){function c(e){try{o(a.next(e))}catch(e){l(e)}}function s(e){try{o(a.throw(e))}catch(e){l(e)}}function o(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,s)}o((a=a.apply(e,t||[])).next())}))},u=function(e,t){var n,a,r,l,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function s(l){return function(s){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,a&&(r=2&l[0]?a.return:l[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,l[1])).done)return r;switch(a=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,a=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(r=c.trys,(r=r.length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){c.label=l[1];break}if(6===l[0]&&c.label<r[1]){c.label=r[1],r=l;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(l);break}r[2]&&c.ops.pop(),c.trys.pop();continue}l=t.call(e,c)}catch(e){l=[6,e],a=0}finally{n=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}};const f=function(e){var t,n=e.object,r=e.idKey,s=e.commentRoute,f=(0,a.useState)({currentUserVote:null!==(t=n.current_user_vote)&&void 0!==t?t:0,totalVote:n.votes_sum_vote}),d=f[0],p=f[1],v=function(e){return i(void 0,void 0,void 0,(function(){var t,a;return u(this,(function(o){switch(o.label){case 0:return d.voting?[2]:(p((function(e){return m(m({},e),{voting:!0})})),[4,c.Z.post(l()(s,n[r]),{vote:e})]);case 1:return t=o.sent(),p({currentUserVote:t.data.current_user_vote,totalVote:null!==(a=t.data.total_votes)&&void 0!==a?a:0}),[2]}}))}))};return a.createElement("div",{className:"vote"},a.createElement("div",{className:"d-flex flex-row text-sm"},a.createElement("div",{className:o()({like:!0,"p-2":!0,cursor:!0,selected:1===d.currentUserVote}),onClick:function(){return v(1)}},a.createElement("i",{className:"fas fa-thumbs-up"}),a.createElement("span",{className:"ml-1"},"Up-vote")),a.createElement("div",{className:"p-2",title:"Votes"},a.createElement("i",{className:"fas fa-vote-yea"}),a.createElement("span",{className:"ml-1"},d.totalVote)),a.createElement("div",{className:o()({like:!0,"p-2":!0,cursor:!0,selected:-1===d.currentUserVote}),onClick:function(){return v(-1)}},a.createElement("i",{className:"fas fa-thumbs-down"}),a.createElement("span",{className:"ml-1"},"Down-vote"))))}},53407:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var a=n(67294),r=n(98595),l=n(10267),c=n(51252);const s=function(e){var t=e.headerBg,n=e.title;return a.createElement(a.Fragment,null,a.createElement("div",{className:"header pb-8 pt-5 pt-lg-8 d-flex align-items-center "+(null!=t?t:"bg-gradient-gray-dark")},a.createElement(r.Z,{className:"d-flex align-items-center flex-grow-1",fluid:!0},a.createElement(l.Z,{className:"flex-grow-1"},a.createElement(c.Z,{lg:"7",md:"10"},a.createElement("h1",{className:"display-2 text-white"},null!=n?n:" "))))))}},24726:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var a=n(67294),r=n(53407),l=n(98595),c=n(10267),s=n(51252),o=n(77243),m=n(53999),i=n(98008),u=n(64593),f=n(9680),d=n(88129),p=n.n(d);const v=function(e){var t=e.userIsLoggedIn,n=e.pageSlug,d=e.title,v=e.children,g=e.customNavButtons,h=e.userCanUpdate,E=e.userCanDelete,b=h||E;return a.createElement(a.Fragment,null,a.createElement(u.q,null,a.createElement("title",null,d)),a.createElement(r.Z,{title:d}),a.createElement(l.Z,{className:"mt--7",fluid:!0},a.createElement(c.Z,{className:"mb-2"},a.createElement(s.Z,{lg:12,className:"text-right"},a.createElement(o.Z,{className:"nav-fill flex-column-reverse flex-sm-row-reverse",pills:!0},t&&b&&a.createElement(a.Fragment,null,E&&a.createElement(m.Z,{className:"ml-2 flex-grow-0"},a.createElement(i.Z,{className:"mb-sm-3 mb-md-0 text-danger",onClick:function(e){if(e.preventDefault(),confirm("Do you really want to delete this page?"))return f.Inertia.delete(p()("page.destroy",n))},href:"#"},a.createElement("i",{className:"fas fa-trash mr-2"}),"Delete")),h&&a.createElement(m.Z,{className:"ml-2 flex-grow-0"},a.createElement(i.Z,{className:"mb-sm-3 mb-md-0",onClick:function(e){return e.preventDefault(),f.Inertia.get(p()("page.edit",n))},href:"#"},a.createElement("i",{className:"fas fa-pencil-alt mr-2"}),"Edit"))),g))),v))}},38845:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>N});var a=n(67294),r=n(53999),l=n(98008),c=n(88129),s=n.n(c),o=n(51636),m=n(24726),i=n(56941),u=n(91121),f=n(609);const d=function(e){var t=e.slug,n=e.userIsLoggedIn,r=e.currentUserAvatar,l=e.currentUserEmail,c=(0,o.cI)({comment:""}),m=c.data,d=c.setData,p=c.post,v=c.processing,g=c.reset;return a.createElement(a.Fragment,null,n&&a.createElement(i.Z,{className:"p-0 mt-2"},a.createElement(u.Z,{className:"p-0 bg-light d-flex flex-column"},a.createElement("div",{className:"p-2"},a.createElement("div",{className:"d-flex flex-row align-items-start"},a.createElement("img",{className:"rounded-circle",src:r,alt:l,width:"40"}),a.createElement(f.Z,{type:"textarea",className:"ml-1 shadow-none textarea",value:m.comment,onChange:function(e){return d("comment",e.target.value)}})),a.createElement("div",{className:"mt-2 text-right"},a.createElement("button",{className:"btn btn-primary btn-sm shadow-none",type:"button",disabled:v,onClick:function(){return p(s()("wiki.comments.store",t),{preserveState:!1})}},"Post comment"),a.createElement("button",{className:"btn btn-outline-primary btn-sm ml-1 shadow-none",type:"button",disabled:v,onClick:function(){return g()}},"Cancel"))))))};var p=n(7143),v=n(73684),g=function(e,t,n,a){return new(n||(n=Promise))((function(r,l){function c(e){try{o(a.next(e))}catch(e){l(e)}}function s(e){try{o(a.throw(e))}catch(e){l(e)}}function o(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,s)}o((a=a.apply(e,t||[])).next())}))},h=function(e,t){var n,a,r,l,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function s(l){return function(s){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,a&&(r=2&l[0]?a.return:l[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,l[1])).done)return r;switch(a=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,a=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(r=c.trys,(r=r.length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){c.label=l[1];break}if(6===l[0]&&c.label<r[1]){c.label=r[1],r=l;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(l);break}r[2]&&c.ops.pop(),c.trys.pop();continue}l=t.call(e,c)}catch(e){l=[6,e],a=0}finally{n=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}};const E=function(e){var t=e.comment,n=e.userIsLoggedIn,r=e.onDeleteComment,l=(0,a.useState)(!1),c=l[0],o=l[1];return a.createElement(a.Fragment,null,a.createElement(i.Z,{className:"p-0 comment"},a.createElement(u.Z,{className:"p-0 d-flex flex-column bg-white"},a.createElement("div",{className:"p-2"},a.createElement("div",{className:"d-flex flex-row user-info align-items-center"},a.createElement("img",{className:"rounded-circle",src:t.user.avatar.small,alt:t.user.name,width:"40",height:"40"}),a.createElement("div",{className:"d-flex flex-column justify-content-start ml-2 flex-grow-1"},a.createElement("span",{className:"d-block font-weight-bold text-primary"},t.user.name),a.createElement("span",{className:"date text-gray-dark text-sm"},t.readable_created_at)),t.can_delete&&!c&&a.createElement("div",{className:"m-2"},a.createElement("a",{href:"#",className:"text-red",onClick:function(e){return e.preventDefault(),g(void 0,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return t.can_delete?[4,p.Z.delete(s()("comments.destroy",t.id))]:[3,2];case 1:200===e.sent().status&&r&&(o(!0),r(t.id)),e.label=2;case 2:return[2]}}))}))}},a.createElement("i",{className:"fas fa-trash"})))),a.createElement("div",{className:"mt-2 text-dark"},a.createElement("p",{className:"comment-text"},t.comment))),n&&a.createElement(v.Z,{object:t,idKey:"id",commentRoute:"comments.vote"}))))};var b=function(e,t){for(var n=0,a=t.length,r=e.length;n<a;n++,r++)e[r]=t[n];return e};const N=function(e){var t=e.auth,n=t.check,c=t.user,i=e.comments.data,u=e.slug,f=e.title,p=e.can,v=p.update,g=p.delete,h=(0,a.useState)([]),N=h[0],w=h[1],y=c?c.avatar.small:void 0;return a.createElement(m.Z,{userIsLoggedIn:n,pageSlug:u,title:"Comments of "+f,userCanUpdate:v,userCanDelete:g,customNavButtons:[a.createElement(r.Z,{className:"ml-2 flex-grow-0",key:"wiki.show"},a.createElement(l.Z,{className:"mb-sm-3 mb-md-0",tag:o.ZQ,href:s()("wiki.show",u)},a.createElement("i",{className:"fas fa-eye mr-2"}),"View page"))]},a.createElement("div",{className:"d-flex justify-content-center row"},a.createElement("div",{className:"col-md-12"},i.filter((function(e){return!N.includes(e.id)})).map((function(e){return a.createElement(E,{userIsLoggedIn:n,comment:e,key:e.id,onDeleteComment:function(e){return w((function(t){return b(b([],t),[e])}))}})})),a.createElement(d,{slug:u,userIsLoggedIn:n,currentUserAvatar:y,currentUserEmail:null==c?void 0:c.email}))))}}}]);
//# sourceMappingURL=845.js.map?id=b9251873bd8a0d139768