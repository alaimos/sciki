(self.webpackChunk=self.webpackChunk||[]).push([[719,879],{77719:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>T});var a=n(67294),r=n(10267),l=n(51252),o=n(56941),c=n(38089),i=n(91121),s=n(82669),u=n(67954),m=n(609),p=n(17354),f=n(69618),d=n(88822),h=n(51566),g=n(97975),E=n(55302),v=n(74855),b=n(96178),y=n(50879),x=n(9669),Z=n.n(x),w=n(88129),N=n.n(w),k=(n(6855),function(){return(k=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)}),C=function(e,t,n,a){return new(n||(n=Promise))((function(r,l){function o(e){try{i(a.next(e))}catch(e){l(e)}}function c(e){try{i(a.throw(e))}catch(e){l(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}i((a=a.apply(e,t||[])).next())}))},S=function(e,t){var n,a,r,l,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function c(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&l[0]?a.return:l[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,l[1])).done)return r;switch(a=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,a=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){o.label=l[1];break}if(6===l[0]&&o.label<r[1]){o.label=r[1],r=l;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(l);break}r[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],a=0}finally{n=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},P=function(e,t){for(var n=0,a=t.length,r=e.length;n<a;n++,r++)e[r]=t[n];return e};const T=function(e){var t,n=e.simulation,x=e.canEditPages,w=e.onIdChange,T=(0,a.useRef)(null),B=(0,a.useState)(!1),F=B[0],O=B[1],j=(0,a.useState)([]),M=j[0],D=j[1],G=(0,a.useState)([]),z=G[0],H=G[1],A=(0,a.useState)(""),K=A[0],L=A[1],R=(0,a.useState)({plugin:"@Simulations:CorrelationGraph",id:"corr-graph-"+Math.random().toString(36).substr(2,10),simulation:n,fn:"pearson",top:!1,n:10,direction:"negative",useEndpoints:!0,usePerturbation:!1,findByTags:[],searchMode:"all",title:"",height:600}),W=R[0],q=R[1];(0,a.useEffect)((function(){w(W.id)}),[W.id]);var I=function(){var e;if(M&&M.length>0){var t=M[0];t&&(q((function(e){return k(k({},e),{findByTags:P(P([],e.findByTags.filter((function(e){return e!==t}))),[t])})})),null===(e=T.current)||void 0===e||e.clear())}},J=function(e){return function(t){t.preventDefault(),q((function(t){return k(k({},t),{findByTags:P([],t.findByTags.filter((function(t){return t!==e})))})}))}};return(0,a.useEffect)((function(){L("```SciKi\n"+JSON.stringify(W,void 0,2)+"\n```")}),[L,n,W]),a.createElement(a.Fragment,null,a.createElement(r.Z,null,a.createElement(l.Z,{xs:"12",xl:"8"},a.createElement(y.default,k({},W))),a.createElement(l.Z,{xs:"12",xl:"4",className:"d-flex flex-column"},a.createElement(o.Z,{className:"bg-gradient-dark shadow mb-2 flex-grow-1"},a.createElement(c.Z,{className:"bg-transparent"},a.createElement("h6",{className:"text-uppercase text-light ls-1 mb-1"},"Change your graph")),a.createElement(i.Z,{className:"text-white-50"},a.createElement(s.Z,null,a.createElement(u.Z,{for:"input-title"},"Title"),a.createElement(m.Z,{id:"input-title",type:"text",value:W.title,onChange:function(e){return q((function(t){return k(k({},t),{title:e.target.value})}))}})),a.createElement(s.Z,null,a.createElement(u.Z,{for:"input-height"},"Height"),a.createElement(m.Z,{id:"input-height",type:"number",value:W.height,onChange:function(e){return q((function(t){return k(k({},t),{height:+e.target.value})}))}})),a.createElement(s.Z,null,a.createElement(u.Z,{for:"input-correlation"},"Correlation"),a.createElement(m.Z,{id:"input-correlation",type:"select",value:W.fn,onChange:function(e){return q((function(t){return k(k({},t),{fn:e.target.value})}))}},a.createElement("option",{value:"pearson"},"Pearson"),a.createElement("option",{value:"spearman"},"Spearman"))),a.createElement("div",{className:"custom-control custom-checkbox mb-3"},a.createElement("input",{className:"custom-control-input",id:"check-use-endpoints",checked:W.useEndpoints,type:"checkbox",onChange:function(e){return q((function(t){return k(k({},t),{useEndpoints:e.target.checked})}))}}),a.createElement("label",{className:"custom-control-label",htmlFor:"check-use-endpoints"},"Compute correlation on Endpoints?")),a.createElement("div",{className:"custom-control custom-checkbox mb-3"},a.createElement("input",{className:"custom-control-input",id:"check-use-perturbation",checked:W.usePerturbation,type:"checkbox",onChange:function(e){return q((function(t){return k(k({},t),{usePerturbation:e.target.checked})}))}}),a.createElement("label",{className:"custom-control-label",htmlFor:"check-use-perturbation"},"Compute correlation using Perturbation?")),a.createElement("div",{className:"custom-control custom-checkbox mb-3"},a.createElement("input",{className:"custom-control-input",id:"check-top-n",checked:W.top,type:"checkbox",onChange:function(e){return q((function(t){return k(k({},t),{top:e.target.checked})}))}}),a.createElement("label",{className:"custom-control-label",htmlFor:"check-top-n"},"Show only the top-N results?")),W.top&&a.createElement(a.Fragment,null,a.createElement(s.Z,null,a.createElement(u.Z,{for:"input-number"},"Number of top results"),a.createElement(m.Z,{id:"input-number",type:"number",value:W.n,onChange:function(e){return q((function(t){return k(k({},t),{n:+e.target.value})}))}})),a.createElement(s.Z,null,a.createElement(u.Z,{for:"input-direction"},"Direction"),a.createElement(m.Z,{id:"input-direction",type:"select",value:W.direction,onChange:function(e){return q((function(t){return k(k({},t),{direction:e.target.value})}))}},a.createElement("option",{value:"positive"},"Top-N positive"),a.createElement("option",{value:"negative"},"Top-N negative")))))))),a.createElement(r.Z,null,a.createElement(l.Z,{xs:"12",xl:x?"8":"12"},a.createElement(o.Z,{className:"bg-gradient-dark shadow flex-grow-1"},a.createElement(c.Z,{className:"bg-transparent"},a.createElement("h6",{className:"text-uppercase text-light ls-1 mb-1"},"Add columns")),a.createElement(i.Z,null,a.createElement("div",{className:"d-flex flex-row justify-content-start align-items-center text-sm text-white-50 flex-wrap"},a.createElement("div",null,"Compare with simulations having"),a.createElement(m.Z,{type:"select",value:null!==(t=W.searchMode)&&void 0!==t?t:"all",className:"form-control-sm mx-2",style:{width:"auto"},onChange:function(e){return q((function(t){return k(k({},t),{searchMode:e.target.value})}))}},a.createElement("option",{value:"all"},"all"),a.createElement("option",{value:"any"},"any")),a.createElement("div",null,"tags:")),a.createElement(r.Z,null,a.createElement(l.Z,{style:{height:"100px"},className:"overflow-auto"},W.findByTags.map((function(e){return a.createElement(p.Z,{key:e,className:"badge-default mx-1 text-light",href:"#",onClick:J(e),title:"Click to delete"},e)})))),a.createElement(r.Z,{className:"mt-2"},a.createElement(l.Z,null,a.createElement(f.Z,null,a.createElement(b.Wf,{filterBy:function(){return!0},id:"tags-add-tag-input",isLoading:F,options:z,onSearch:function(e){return C(void 0,void 0,void 0,(function(){var t;return S(this,(function(n){switch(n.label){case 0:O(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,Z().post(N()("tag.typeahead"),{query:e})];case 2:return t=n.sent(),H(t.data),[3,4];case 3:return n.sent(),H([]),[3,4];case 4:return O(!1),[2]}}))}))},onChange:function(e){return D(e)},onKeyDown:function(e){var t=e;"Enter"!==t.code&&"NumpadEnter"!==t.code||I()},selected:M,minLength:3,className:"text-dark",placeholder:"Add new tag (category: tag)",ref:T}),a.createElement(d.Z,{addonType:"append"},a.createElement(h.Z,null,a.createElement("a",{className:"text-primary",href:"#",onClick:function(e){e.preventDefault(),I()}},a.createElement("i",{className:"fas fa-plus"})))))))))),x&&a.createElement(l.Z,{xs:"12",xl:"4"},a.createElement(o.Z,{className:"bg-gradient-dark shadow flex-grow-1"},a.createElement(c.Z,{className:"bg-transparent"},a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},a.createElement("h6",{className:"text-uppercase text-light ls-1 mb-1"},"Get the code"),a.createElement(v.CopyToClipboard,{text:K},a.createElement(g.Z,{className:"btn btn-sm btn-link",id:"get-code-tooltip",type:"button"},a.createElement("i",{className:"fas fa-clipboard"}))),a.createElement(E.Z,{delay:0,trigger:"hover focus",target:"get-code-tooltip"},"Copy To Clipboard"))),a.createElement(i.Z,null,a.createElement("code",{className:"text-wrap"},a.createElement("pre",{className:"text-white-50",style:{maxHeight:"150px",overflowX:"auto"}},K)))))))}},50879:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var a=n(67294),r=n(9669),l=n.n(r),o=n(88129),c=n.n(o),i=n(17834),s=n(58660),u=n(70755),m=function(){return(m=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};const p=function(e){var t=e.id,n=e.simulation,r=e.title,o=e.height,p=void 0===o?600:o,f=e.fn,d=void 0===f?"pearson":f,h=e.top,g=void 0!==h&&h,E=e.n,v=void 0===E?10:E,b=e.direction,y=void 0===b?"negative":b,x=e.useEndpoints,Z=void 0===x||x,w=e.usePerturbation,N=void 0!==w&&w,k=e.findByTags,C=e.searchMode,S=void 0===C?"all":C,P=(0,a.useState)({}),T=P[0],B=P[1],F=(0,u.P)(),O=T.data,j=T.error,M=T.message;return(0,a.useEffect)((function(){B({}),k&&k.length>0&&l().post(c()("simulations.plugins.correlation",n),{fn:d,top:g,n:v,direction:y,useEndpoints:Z,usePerturbation:N,findByTags:k,searchMode:S}).then((function(e){var t=e.data;B({data:t})})).catch((function(e){var t;B({error:!0,message:null!==(t=e.response.data.message)&&void 0!==t?t:e.message})}))}),[n,d,g,v,y,Z,N,k,S]),k&&0!==k.length?j?a.createElement("p",{className:"text-red"},M):a.createElement(a.Fragment,null,!!O&&a.createElement(a.Fragment,null,a.createElement("div",{className:"d-flex flex-grow-1"},a.createElement(s.Z,{data:[m(m({},O),{type:"bar",marker:{color:O.y.map((function(e){return(e+1)/2})),cmin:-1,cmax:1,colorscale:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(255,255,255)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],showscale:!0}})],layout:{bargap:0,yaxis:{title:"pearson"===d?"Pearson Correlation":"Spearman Correlation",range:[-1,1]},font:{size:12},autosize:!0,showlegend:!1,title:r},config:{responsive:!0},style:{width:"100%",height:p+"px"},useResizeHandler:!0,onClick:function(e){if(t&&e.points.length>0){var n=e.points[0].customdata;F.dispatch("onCorrelationGraphBarClick",{sender:t,compareWith:n[0],fn:n[1],useEndpoints:!!n[2],usePerturbation:!!n[3]})}}}))),!O&&a.createElement(i.Z,{color:"primary"},a.createElement("i",{className:"fas fa-circle-notch fa-spin mx-2"}),"Building image. Please wait...")):a.createElement(i.Z,{color:"primary"},a.createElement("i",{className:"fas fa-exclamation-circle mx-2"}),"You cannot view any graph until you select at lest two simulations through their tags.")}}}]);
//# sourceMappingURL=719.js.map?id=a26b226580fd3bf67231