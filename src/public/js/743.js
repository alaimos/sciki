(self.webpackChunk=self.webpackChunk||[]).push([[743,890],{53407:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var a=n(67294),r=n(98595),l=n(10267),o=n(51252);const i=function(e){var t=e.headerBg,n=e.title;return a.createElement(a.Fragment,null,a.createElement("div",{className:"header pb-8 pt-5 pt-lg-8 d-flex align-items-center "+(null!=t?t:"bg-gradient-gray-dark")},a.createElement(r.Z,{className:"d-flex align-items-center flex-grow-1",fluid:!0},a.createElement(l.Z,{className:"flex-grow-1"},a.createElement(o.Z,{lg:"7",md:"10"},a.createElement("h1",{className:"display-2 text-white"},null!=n?n:" "))))))}},19555:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Z});var a=n(67294),r=n(56941),l=n(38089),o=n(91121),i=n(10267),s=n(51252),c=n(17354),u=n(69618),m=n(88822),d=n(51566),f=n(94184),E=n.n(f),g=n(96178),p=n(9669),h=n.n(p),v=n(88129),b=n.n(v);n(6855);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var N=function(e,t,n,a){return new(n||(n=Promise))((function(r,l){function o(e){try{s(a.next(e))}catch(e){l(e)}}function i(e){try{s(a.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}s((a=a.apply(e,t||[])).next())}))},x=function(e,t){var n,a,r,l,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function i(l){return function(i){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&l[0]?a.return:l[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,l[1])).done)return r;switch(a=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,a=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){o.label=l[1];break}if(6===l[0]&&o.label<r[1]){o.label=r[1],r=l;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(l);break}r[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],a=0}finally{n=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,i])}}};const Z=function(e){var t=e.tags,n=e.errors,f=e.onAddTag,p=e.onDeleteTag,v=e.dark,Z=void 0===v||v,S=(0,a.useRef)(null),w=(0,a.useState)(!1),k=w[0],D=w[1],P=(0,a.useState)([]),O=P[0],R=P[1],C=(0,a.useState)([]),_=C[0],F=C[1],T=function(e){var t;if(e){var n=e.split(/:\s*/,2);f(1===n.length?"unknown: "+n[0]:n.join(": ")),null===(t=S.current)||void 0===t||t.clear()}};return a.createElement(r.Z,{className:E()({"bg-gradient-dark":Z,shadow:!0})},a.createElement(l.Z,{className:"bg-transparent"},a.createElement("h6",{className:"text-uppercase text-light ls-1 mb-1"},"Tags")),a.createElement(o.Z,null,a.createElement(i.Z,null,a.createElement(s.Z,{style:{height:"100px"},className:"overflow-auto"},t.map((function(e){return a.createElement(c.Z,{key:e,className:"badge-default mx-1 text-light",href:"#",onClick:function(t){t.preventDefault(),p(e)},title:"Click to delete"},e)})))),a.createElement(i.Z,null,a.createElement(s.Z,null,!!n&&a.createElement("div",{className:"invalid-feedback d-block"},a.createElement("strong",null,n)))),a.createElement(i.Z,{className:"mt-2"},a.createElement(s.Z,null,a.createElement(u.Z,null,a.createElement(g.Wf,{filterBy:function(){return!0},id:"tags-manager-add-tag-input",isLoading:k,options:_,onSearch:function(e){return N(void 0,void 0,void 0,(function(){var t;return x(this,(function(n){switch(n.label){case 0:D(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,h().post(b()("tag.typeahead"),{query:e})];case 2:return t=n.sent(),F(t.data),[3,4];case 3:return n.sent(),F([]),[3,4];case 4:return D(!1),[2]}}))}))},onChange:function(e){return R(e)},onKeyDown:function(e){var t,n=e;"Enter"!==n.code&&"NumpadEnter"!==n.code||(T(n.target.value),null===(t=S.current)||void 0===t||t.clear())},selected:O,minLength:3,className:"text-dark",placeholder:"Add new tag (category: tag)",ref:S,allowNew:!0}),a.createElement(m.Z,{addonType:"append"},a.createElement(d.Z,null,a.createElement("a",{className:"text-primary",href:"#",onClick:function(e){e.preventDefault(),T(function(e){if(e.length>0){if("object"===y(e[0]))return e[0].label;if("string"==typeof e[0])return e[0]}}(O))}},a.createElement("i",{className:"fas fa-plus"})))))))))}},27890:(e,t,n)=>{"use strict";n.r(t),n.d(t,{NodeType:()=>a,default:()=>h});var a,r=n(67294),l=n(96486),o=n(99551),i=n(814),s=n(14951),c=n(9669),u=n.n(c),m=n(92432),d=n(88129),f=n.n(d),E=n(97975),g=n(55302),p=(n(59201),n(12313),n(82106),function(){return(p=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)});!function(e){e[e.KNOCKOUT=-1]="KNOCKOUT",e[e.NON_EXPRESSED=0]="NON_EXPRESSED",e[e.UNDER_EXPRESSED=1]="UNDER_EXPRESSED",e[e.OVER_EXPRESSED=2]="OVER_EXPRESSED"}(a||(a={}));const h=function(e){var t=e.organism,n=e.selectedNodes,c=e.onNodeClick;if(!t)return r.createElement("div",{className:"py-4"},"Please select an organism to continue");var d=(0,r.useState)({data:void 0,sizePerPage:10,page:1,totalSize:0}),h=d[0],v=d[1],b=h.data,y=h.sizePerPage,N=h.page,x=h.totalSize;(0,r.useEffect)((function(){v({data:void 0,sizePerPage:10,page:1,totalSize:0})}),[t]),(0,r.useEffect)((function(){void 0===b&&u().post(f()("simulations.nodes.table",t),{}).then((function(e){v((function(t){return p(p({},t),e.data)}))})).catch((function(e){console.error(e)}))}),[t,b]);var Z=(0,r.useMemo)((function(){return(0,i.ZP)({page:N,totalSize:x,sizePerPage:y,alwaysShowAllBtns:!0,showTotal:!0,withFirstAndLast:!1,sizePerPageRenderer:function(e){var t=e.onSizePerPageChange;return r.createElement("div",{className:"dataTables_length",id:"datatable-basic_length"},r.createElement("label",null,"Show"," ",r.createElement("select",{name:"datatable-basic_length","aria-controls":"datatable-basic",className:"form-control form-control-sm",onChange:function(e){return t(+e.target.value,1)}},r.createElement("option",{value:"10"},"10"),r.createElement("option",{value:"25"},"25"),r.createElement("option",{value:"50"},"50"),r.createElement("option",{value:"100"},"100"))," ","entries."))}})}),[N,x,y]);return r.createElement("div",{className:"py-4"},r.createElement(o.Z,{keyField:"id",data:null!=b?b:[],columns:[{dataField:"accession",text:"Accession",sort:!0,filter:(0,s.DN)()},{dataField:"name",text:"Name",sort:!0,filter:(0,s.DN)()},{dataField:"overexpressed",isDummyField:!0,text:"",headerStyle:{width:"60px"},formatter:function(e,t){var o=(0,l.has)(n,t.id)&&(0,l.get)(n,t.id)===a.OVER_EXPRESSED;return r.createElement(r.Fragment,null,r.createElement(E.Z,{id:"overexpressed-button-"+t.id,onClick:function(e){e.preventDefault(),c(t.id,a.OVER_EXPRESSED)},size:"sm",color:"danger",outline:!o},r.createElement("i",{className:"fas fa-level-up-alt fa-fw"})),r.createElement(g.Z,{placement:"auto",target:"overexpressed-button-"+t.id},"Set as overexpressed"))}},{dataField:"underexpressed",isDummyField:!0,text:"",headerStyle:{width:"60px"},formatter:function(e,t){var o=(0,l.has)(n,t.id)&&(0,l.get)(n,t.id)===a.UNDER_EXPRESSED;return r.createElement(r.Fragment,null,r.createElement(E.Z,{id:"underexpressed-button-"+t.id,onClick:function(e){e.preventDefault(),c(t.id,a.UNDER_EXPRESSED)},size:"sm",color:"primary",outline:!o},r.createElement("i",{className:"fas fa-level-down-alt fa-fw"})),r.createElement(g.Z,{placement:"auto",target:"underexpressed-button-"+t.id},"Set as underexpressed"))}},{dataField:"nonexpressed",isDummyField:!0,text:"",headerStyle:{width:"60px"},formatter:function(e,t){var o=(0,l.has)(n,t.id)&&(0,l.get)(n,t.id)===a.NON_EXPRESSED;return r.createElement(r.Fragment,null,r.createElement(E.Z,{id:"nonexpressed-button-"+t.id,onClick:function(e){e.preventDefault(),c(t.id,a.NON_EXPRESSED)},size:"sm",color:"warning",outline:!o},r.createElement("i",{className:"fas fa-ban fa-fw"})),r.createElement(g.Z,{placement:"auto",target:"nonexpressed-button-"+t.id},"Set as non-expressed"))}},{dataField:"knockedout",isDummyField:!0,text:"",headerStyle:{width:"60px"},formatter:function(e,t){var o=(0,l.has)(n,t.id)&&(0,l.get)(n,t.id)===a.KNOCKOUT;return r.createElement(r.Fragment,null,r.createElement(E.Z,{id:"knockedout-button-"+t.id,onClick:function(e){e.preventDefault(),c(t.id,a.KNOCKOUT)},size:"sm",color:"default",outline:!o},r.createElement("i",{className:"fas fa-times fa-fw"})),r.createElement(g.Z,{placement:"auto",target:"knockedout-button-"+t.id},"Set as knocked-out"))}}],remote:!0,bootstrap4:!0,pagination:Z,filter:(0,s.ZP)(),bordered:!1,onTableChange:function(e,n){u().post(f()("simulations.nodes.table",t),{page:n.page,sizePerPage:n.sizePerPage,sortField:n.sortField,sortOrder:n.sortOrder,filters:n.filters}).then((function(e){v((function(t){return p(p({},t),e.data)}))})).catch((function(e){console.error(e)}))},overlay:(0,m.Z)({spinner:!0})}))}},12743:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>C});var a=n(67294),r=n(96486),l=n(53407),o=n(15538),i=n(98595),s=n(10267),c=n(51252),u=n(77243),m=n(53999),d=n(98008),f=n(56941),E=n(38089),g=n(91121),p=n(82669),h=n(67954),v=n(609),b=n(70474),y=n(51636),N=n(19555),x=n(88129),Z=n.n(x),S=n(94184),w=n.n(S),k=n(27890),D=function(){return(D=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},P=function(e,t,n,a){return new(n||(n=Promise))((function(r,l){function o(e){try{s(a.next(e))}catch(e){l(e)}}function i(e){try{s(a.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}s((a=a.apply(e,t||[])).next())}))},O=function(e,t){var n,a,r,l,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function i(l){return function(i){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&l[0]?a.return:l[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,l[1])).done)return r;switch(a=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,a=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){o.label=l[1];break}if(6===l[0]&&o.label<r[1]){o.label=r[1],r=l;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(l);break}r[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],a=0}finally{n=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,i])}}},R=function(e,t){for(var n=0,a=t.length,r=e.length;n<a;n++,r++)e[r]=t[n];return e};const C=function(e){var t,n=e.capabilities.simulations.create,x=e.organisms;if(!n)return null;var S=(0,y.cI)({name:"",nodes:{},tags:[],existing:!1}),C=S.data,_=S.setData,F=S.errors,T=S.post,z=S.processing,X=function(e){return P(void 0,void 0,void 0,(function(){var t;return O(this,(function(n){switch(n.label){case 0:return e.preventDefault(),C.existing||Object.values(null!==(t=C.nodes)&&void 0!==t?t:{}).some((function(e){return[k.NodeType.OVER_EXPRESSED,k.NodeType.UNDER_EXPRESSED].includes(e)}))?0!==C.tags.length||confirm("You did not select any tag for your simulation. Tagging the simulation is fundamental to use many advanced features. Are you sure?")?[4,T(Z()("simulations.store"))]:[2]:(alert("You must select at least one over- or under-expressed node for the simulation."),[2]);case 1:return n.sent(),[2]}}))}))};return a.createElement(o.Z,{onSubmit:X},a.createElement(l.Z,{title:"New simulation"}),a.createElement(i.Z,{className:"mt--7",fluid:!0},a.createElement(s.Z,{className:"mb-2"},a.createElement(c.Z,{lg:12,className:"text-right"},a.createElement(u.Z,{className:"nav-fill flex-column-reverse flex-sm-row-reverse",pills:!0},a.createElement(m.Z,{className:"flex-grow-0"},a.createElement(d.Z,{className:"mb-sm-3 mb-md-0",onClick:X,disabled:z,href:"#"},a.createElement("i",{className:"fas fa-save mr-2"}),"Save"))))),a.createElement(s.Z,null,a.createElement(c.Z,{className:"mb-5 mb-xl-2",xl:"8"},a.createElement(f.Z,{className:"shadow"},a.createElement(E.Z,{className:"bg-transparent"},a.createElement("h6",{className:"text-uppercase text-dark ls-1 mb-1"},"Simulation Details")),a.createElement(g.Z,null,a.createElement(p.Z,{className:w()({"has-danger":!!F.name})},a.createElement(h.Z,{for:"create-simulation-name-field"},"Name:"),a.createElement(v.Z,{id:"create-simulation-name-field",placeholder:"Give a name to your simulation",type:"text",value:C.name,onChange:function(e){return _("name",e.target.value)},invalid:!!F.name}),a.createElement(b.Z,{tag:"span",className:"invalid-feedback"},a.createElement("strong",null,F.name))),a.createElement(s.Z,null,a.createElement(c.Z,{xs:1},a.createElement("label",{className:"custom-toggle"},a.createElement("input",{type:"checkbox",checked:C.existing,onChange:function(){return _((function(e){return D(D({},e),{existing:!e.existing})}))}}),a.createElement("span",{className:"custom-toggle-slider rounded-circle"}))),a.createElement(c.Z,{xs:"11"},"Import an existing simulation?")),C.existing&&a.createElement(p.Z,{className:w()({"has-danger":!!F.remote_id})},a.createElement(h.Z,{for:"create-simulation-name-field"},"Simulation Id:"),a.createElement(v.Z,{id:"create-simulation-id-field",placeholder:"Insert here the ID of an existing simulation",type:"text",value:C.remote_id,onChange:function(e){return _("remote_id",+e.target.value)},invalid:!!F.remote_id}),a.createElement(b.Z,{tag:"span",className:"invalid-feedback"},a.createElement("strong",null,F.remote_id))),!C.existing&&a.createElement(a.Fragment,null,a.createElement(p.Z,{className:w()({"has-danger":!!F.organism})},a.createElement(h.Z,{for:"create-simulation-organism-field"},"Organism:"),a.createElement(v.Z,{id:"create-simulation-organism-field",placeholder:"Give a name to your simulation",type:"select",value:C.organism,onChange:function(e){return _("organism",+e.target.value)},invalid:!!F.organism},a.createElement("option",{value:""},"-- Select an organism --"),x.map((function(e){return a.createElement("option",{value:e.id,key:e.id},e.name)}))),a.createElement(b.Z,{tag:"span",className:"invalid-feedback"},a.createElement("strong",null,F.organism))),a.createElement(p.Z,{className:w()({"has-danger":!!F.nodes})},a.createElement(h.Z,{for:"create-simulation-nodes-table"},"Nodes:"),a.createElement(k.default,{organism:C.organism,selectedNodes:null!==(t=C.nodes)&&void 0!==t?t:{},onNodeClick:function(e,t){_((function(n){var a=D({},n.nodes);return(0,r.has)(a,e)&&(0,r.get)(a,e)===t?(0,r.unset)(a,e):a=(0,r.set)(a,e,t),D(D({},n),{nodes:a})}))}}),a.createElement(b.Z,{tag:"span",className:w()({"invalid-feedback":!0,"d-block":!!F.nodes})},a.createElement("strong",null,F.nodes))))))),a.createElement(c.Z,{className:"mb-5 mb-xl-2",xl:"4"},a.createElement(N.Z,{tags:C.tags,onAddTag:function(e){return _((function(t){return D(D({},t),{tags:R(R([],t.tags.filter((function(t){return t!==e}))),[e])})}))},onDeleteTag:function(e){return _((function(t){return D(D({},t),{tags:t.tags.filter((function(t){return t!==e}))})}))}})))))}}}]);
//# sourceMappingURL=743.js.map?id=a88be501189f20d1c8d2