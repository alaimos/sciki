{"version":3,"sources":["webpack:///./resources/js/Components/Common/Vote.tsx","webpack:///./resources/js/Components/Layout/Headers/DefaultHeader.tsx","webpack:///./resources/js/Components/Wiki/WikiPageHeader.tsx","webpack:///./resources/js/Pages/Wiki/Page.tsx","webpack:///./resources/js/Components/Wiki/Plugins|lazy|/^\\.\\/.*$/|groupOptions: {}|namespace object"],"names":["object","idKey","commentRoute","useState","currentUserVote","current_user_vote","totalVote","votes_sum_vote","state","setState","doVote","vote","voting","prevState","response","data","total_votes","className","like","cursor","selected","onClick","title","headerBg","fluid","lg","md","userIsLoggedIn","pageSlug","children","customNavButtons","userCanUpdate","userCanDelete","userCanUpdateOrDelete","pills","e","preventDefault","confirm","Inertia","href","auth","is_editor","is_admin","page","content","can","isLoading","setIsLoading","processedContent","setProcessedContent","useEffect","newContent","Array","length","fill","undefined","i","componentName","key","props","importedModule","startsWith","cleanedName","replace","match","plugin","path","console","error","reactComponent","filter","c","tag","active","spinner","color","text","style","position","top","right","map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","Error","code","ids","id","all","slice","keys","Object","module","exports"],"mappings":"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","file":"js/79.js?id=6eaf10e8eb8068a1d9cf","sourcesContent":["import React, { useState } from \"react\";\nimport route from \"ziggy-js\";\nimport axios from \"../../Common/axios\";\nimport classNames from \"classnames\";\n\nexport interface Voteable {\n    current_user_vote: number | null;\n    votes_sum_vote: number;\n}\n\ninterface CommentVoteResponse {\n    current_user_vote: number;\n    total_votes: number;\n}\n\ninterface Props<T extends Voteable = Voteable> {\n    object: T;\n    idKey: string;\n    commentRoute: string;\n}\n\ninterface State {\n    voting?: boolean;\n    currentUserVote: number;\n    totalVote: number;\n}\n\nconst Vote: React.FC<Props> = ({ object, idKey, commentRoute }: Props) => {\n    const [state, setState] = useState<State>({\n        currentUserVote: object.current_user_vote ?? 0,\n        totalVote: object.votes_sum_vote,\n    });\n    const doVote = async (vote: number) => {\n        if (state.voting) return;\n        setState((prevState) => ({ ...prevState, voting: true }));\n        const response = await axios.post<CommentVoteResponse>(\n            // @ts-ignore\n            route(commentRoute, object[idKey]),\n            {\n                vote,\n            }\n        );\n        setState({\n            currentUserVote: response.data.current_user_vote,\n            totalVote: response.data.total_votes ?? 0,\n        });\n    };\n\n    return (\n        <div className=\"vote\">\n            <div className=\"d-flex flex-row text-sm\">\n                <div\n                    className={classNames({\n                        like: true,\n                        \"p-2\": true,\n                        cursor: true,\n                        selected: state.currentUserVote === 1,\n                    })}\n                    onClick={() => doVote(+1)}\n                >\n                    <i className=\"fas fa-thumbs-up\" />\n                    <span className=\"ml-1\">Up-vote</span>\n                </div>\n                <div className=\"p-2\" title=\"Votes\">\n                    <i className=\"fas fa-vote-yea\" />\n                    <span className=\"ml-1\">{state.totalVote}</span>\n                </div>\n                <div\n                    className={classNames({\n                        like: true,\n                        \"p-2\": true,\n                        cursor: true,\n                        selected: state.currentUserVote === -1,\n                    })}\n                    onClick={() => doVote(-1)}\n                >\n                    <i className=\"fas fa-thumbs-down\" />\n                    <span className=\"ml-1\">Down-vote</span>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Vote;\n","import React from \"react\";\nimport { Container, Row, Col } from \"reactstrap\";\n\ninterface Props {\n    headerBg?: string;\n    title?: React.ReactNode;\n}\n\nconst DefaultHeader: React.FC<Props> = ({ headerBg, title }: Props) => {\n    return (\n        <>\n            <div\n                className={`header pb-8 pt-5 pt-lg-8 d-flex align-items-center ${\n                    headerBg ?? \"bg-gradient-gray-dark\"\n                }`}\n            >\n                <Container\n                    className=\"d-flex align-items-center flex-grow-1\"\n                    fluid\n                >\n                    <Row className=\"flex-grow-1\">\n                        <Col lg=\"7\" md=\"10\">\n                            <h1 className=\"display-2 text-white\">\n                                {title ?? \" \"}\n                            </h1>\n                        </Col>\n                    </Row>\n                </Container>\n            </div>\n        </>\n    );\n};\n\nexport default DefaultHeader;\n","import React, { ReactNode } from \"react\";\nimport Header from \"../../Components/Layout/Headers/DefaultHeader\";\nimport { Col, Container, Nav, NavItem, NavLink, Row } from \"reactstrap\";\nimport { Helmet } from \"react-helmet\";\nimport { Inertia } from \"@inertiajs/inertia\";\nimport route from \"ziggy-js\";\n\ninterface Props {\n    userIsLoggedIn: boolean;\n    pageSlug: string;\n    title: string;\n    customNavButtons?: ReactNode[];\n    children?: ReactNode;\n    userCanUpdate: boolean;\n    userCanDelete: boolean;\n}\n\nconst WikiPageHeader: React.FC<Props> = ({\n    userIsLoggedIn,\n    pageSlug,\n    title,\n    children,\n    customNavButtons,\n    userCanUpdate,\n    userCanDelete,\n}: Props) => {\n    const userCanUpdateOrDelete = userCanUpdate || userCanDelete;\n    const handleDelete = (e: React.MouseEvent<HTMLAnchorElement>) => {\n        e.preventDefault();\n        if (confirm(\"Do you really want to delete this page?\")) {\n            return Inertia.delete(route(\"page.destroy\", pageSlug));\n        }\n        return;\n    };\n    const handleEdit = (e: React.MouseEvent<HTMLAnchorElement>) => {\n        e.preventDefault();\n        return Inertia.get(route(\"page.edit\", pageSlug));\n    };\n    return (\n        <>\n            <Helmet>\n                <title>{title}</title>\n            </Helmet>\n            <Header title={title} />\n            <Container className=\"mt--7\" fluid>\n                <Row className=\"mb-2\">\n                    <Col lg={12} className=\"text-right\">\n                        <Nav\n                            className=\"nav-fill flex-column-reverse flex-sm-row-reverse\"\n                            pills\n                        >\n                            {userIsLoggedIn && userCanUpdateOrDelete && (\n                                <>\n                                    {userCanDelete && (\n                                        <NavItem className=\"ml-2 flex-grow-0\">\n                                            <NavLink\n                                                className=\"mb-sm-3 mb-md-0 text-danger\"\n                                                onClick={handleDelete}\n                                                href=\"#\"\n                                            >\n                                                <i className=\"fas fa-trash mr-2\" />\n                                                Delete\n                                            </NavLink>\n                                        </NavItem>\n                                    )}\n                                    {userCanUpdate && (\n                                        <NavItem className=\"ml-2 flex-grow-0\">\n                                            <NavLink\n                                                className=\"mb-sm-3 mb-md-0\"\n                                                onClick={handleEdit}\n                                                href=\"#\"\n                                            >\n                                                <i className=\"fas fa-pencil-alt mr-2\" />\n                                                Edit\n                                            </NavLink>\n                                        </NavItem>\n                                    )}\n                                </>\n                            )}\n                            {customNavButtons}\n                        </Nav>\n                    </Col>\n                </Row>\n                {children}\n            </Container>\n        </>\n    );\n};\n\nexport default WikiPageHeader;\n","import React, { useEffect, useState } from \"react\";\nimport { Card, CardBody, NavItem, NavLink, Spinner } from \"reactstrap\";\nimport { InertiaLink } from \"@inertiajs/inertia-react\";\nimport { CommonPageProps } from \"../../Types/page\";\nimport route from \"ziggy-js\";\nimport { pluginRegex } from \"../../Common/pluginResolver\";\n// @ts-ignore\nimport LoadingOverlay from \"react-loading-overlay\";\nimport WikiPageHeader from \"../../Components/Wiki/WikiPageHeader\";\nimport Vote from \"../../Components/Common/Vote\";\n\ninterface CustomContent {\n    key: string;\n    component: string;\n    props: Record<string, unknown>;\n    content: string;\n}\n\ninterface Props extends CommonPageProps {\n    slug: string;\n    page: {\n        id: number;\n        slug: string;\n        title: string;\n        current_user_vote: number;\n        votes_sum_vote: number;\n    };\n    content: CustomContent[];\n    draft: boolean;\n    can: {\n        create: boolean;\n        update: boolean;\n        delete: boolean;\n    };\n}\n\nconst Page: React.FC<Props> = ({\n    auth: { check: userIsLoggedIn, is_editor, is_admin },\n    page,\n    content,\n    can: { update: userCanUpdate, delete: userCanDelete },\n}: Props) => {\n    const { slug: pageSlug, title } = page;\n    const [isLoading, setIsLoading] = useState(false);\n    const [processedContent, setProcessedContent] = useState<React.ReactNode[]>(\n        []\n    );\n\n    useEffect(() => {\n        if (!content) return;\n        (async () => {\n            setIsLoading(true);\n            const newContent: React.ReactNode[] = new Array(content.length);\n            newContent.fill(undefined);\n            for (let i = 0; i < content.length; i++) {\n                const { component: componentName, key, props } = content[i];\n                if (componentName) {\n                    try {\n                        let importedModule;\n                        if (componentName.startsWith(\"#\")) {\n                            const cleanedName = componentName.replace(/^#/, \"\");\n                            importedModule = await import(\n                                `./../../Components/Wiki/Plugins/${cleanedName}`\n                            );\n                        } else if (!componentName.startsWith(\"@\")) {\n                            importedModule = await import(\n                                `./../../Components/Wiki/Html`\n                            );\n                        } else {\n                            const match = componentName.match(pluginRegex);\n                            if (!match) {\n                                console.error(`Syntax error: ${componentName}`);\n                                continue;\n                            }\n                            const plugin = match[1];\n                            const path = match[2].replace(/^\\//, \"\");\n                            importedModule = await import(\n                                `./../../Modules/${plugin}/WikiPlugins/${path}`\n                            );\n                        }\n                        const { default: reactComponent } = importedModule;\n                        newContent[i] = React.createElement(\n                            reactComponent,\n                            {\n                                key,\n                                ...props,\n                            },\n                            null\n                        );\n                    } catch (e) {\n                        console.error(e);\n                    }\n                }\n                setProcessedContent(newContent.filter((c) => !!c));\n            }\n            setIsLoading(false);\n        })().catch((e) => console.error(e));\n    }, [content, setProcessedContent]);\n\n    return (\n        <WikiPageHeader\n            userIsLoggedIn={userIsLoggedIn}\n            pageSlug={pageSlug}\n            title={title}\n            userCanUpdate={userCanUpdate}\n            userCanDelete={userCanDelete}\n            customNavButtons={[\n                <NavItem className=\"ml-2 flex-grow-0\" key=\"wiki.comments.index\">\n                    <NavLink\n                        className=\"mb-sm-3 mb-md-0\"\n                        tag={InertiaLink}\n                        href={route(\"wiki.comments\", pageSlug)}\n                    >\n                        <i className=\"fas fa-comments mr-2\" />\n                        Comments\n                    </NavLink>\n                </NavItem>,\n                <NavItem\n                    className=\"ml-2 flex-grow-0\"\n                    key=\"wiki.revisions.index\"\n                >\n                    <NavLink\n                        className=\"mb-sm-3 mb-md-0\"\n                        tag={InertiaLink}\n                        href={route(\"wiki.revisions.index\", pageSlug)}\n                    >\n                        <i className=\"fas fa-history mr-2\" />\n                        History\n                    </NavLink>\n                </NavItem>,\n            ]}\n        >\n            <LoadingOverlay\n                active={isLoading}\n                spinner={<Spinner color=\"light\" className=\"mr-2\" />}\n                text=\"Rendering...\"\n            >\n                <Card className=\"shadow\">\n                    <CardBody>\n                        {processedContent}\n                        {userIsLoggedIn && (is_editor || is_admin) && (\n                            <div\n                                className=\"bg-white\"\n                                style={{\n                                    position: \"absolute\",\n                                    top: \"0\",\n                                    right: \"0\",\n                                }}\n                            >\n                                <div className=\"m-2\">\n                                    <Vote\n                                        object={page}\n                                        idKey=\"slug\"\n                                        commentRoute=\"page.vote\"\n                                    />\n                                </div>\n                            </div>\n                        )}\n                    </CardBody>\n                </Card>\n            </LoadingOverlay>\n        </WikiPageHeader>\n    );\n};\n\nexport default Page;\n","var map = {\n\t\"./Error\": [\n\t\t17121,\n\t\t898,\n\t\t121\n\t],\n\t\"./Error.tsx\": [\n\t\t17121,\n\t\t898,\n\t\t121\n\t],\n\t\"./HighlightedCode\": [\n\t\t20104,\n\t\t898,\n\t\t104\n\t],\n\t\"./HighlightedCode.tsx\": [\n\t\t20104,\n\t\t898,\n\t\t104\n\t],\n\t\"./Katex\": [\n\t\t53051,\n\t\t898,\n\t\t51\n\t],\n\t\"./Katex.tsx\": [\n\t\t53051,\n\t\t898,\n\t\t51\n\t],\n\t\"./Mermaid\": [\n\t\t9136,\n\t\t898,\n\t\t44\n\t],\n\t\"./Mermaid.tsx\": [\n\t\t9136,\n\t\t898,\n\t\t44\n\t],\n\t\"./Test\": [\n\t\t55678,\n\t\t678\n\t],\n\t\"./Test.tsx\": [\n\t\t55678,\n\t\t678\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(() => {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 25747;\nmodule.exports = webpackAsyncContext;"],"sourceRoot":""}