(self.webpackChunk=self.webpackChunk||[]).push([[166],{53407:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(67294),r=n(98595),i=n(10267),l=n(51252);const o=function(e){var t=e.headerBg,n=e.title;return a.createElement(a.Fragment,null,a.createElement("div",{className:"header pb-8 pt-5 pt-lg-8 d-flex align-items-center "+(null!=t?t:"bg-gradient-gray-dark")},a.createElement(r.Z,{className:"d-flex align-items-center flex-grow-1",fluid:!0},a.createElement(i.Z,{className:"flex-grow-1"},a.createElement(l.Z,{lg:"7",md:"10"},a.createElement("h1",{className:"display-2 text-white"},null!=n?n:" "))))))}},19555:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var a=n(67294),r=n(56941),i=n(38089),l=n(91121),o=n(10267),c=n(51252),s=n(17354),d=n(69618),u=n(88822),m=n(51566),f=n(94184),v=n.n(f),p=n(96178),g=n(9669),h=n.n(g),b=n(88129),E=n.n(b);n(6855);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var C=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function l(e){try{c(a.next(e))}catch(e){i(e)}}function o(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}c((a=a.apply(e,t||[])).next())}))},x=function(e,t){var n,a,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,a=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(r=l.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};const w=function(e){var t=e.tags,n=e.errors,f=e.onAddTag,g=e.onDeleteTag,b=e.dark,w=void 0===b||b,A=(0,a.useRef)(null),k=(0,a.useState)(!1),M=k[0],N=k[1],Z=(0,a.useState)([]),T=Z[0],S=Z[1],B=(0,a.useState)([]),L=B[0],D=B[1],O=function(e){var t;if(e){var n=e.split(/:\s*/,2);f(1===n.length?"unknown: "+n[0]:n.join(": ")),null===(t=A.current)||void 0===t||t.clear()}};return a.createElement(r.Z,{className:v()({"bg-gradient-dark":w,shadow:!0})},a.createElement(i.Z,{className:"bg-transparent"},a.createElement("h6",{className:"text-uppercase text-light ls-1 mb-1"},"Tags")),a.createElement(l.Z,null,a.createElement(o.Z,null,a.createElement(c.Z,{style:{height:"100px"},className:"overflow-auto"},t.map((function(e){return a.createElement(s.Z,{key:e,className:"badge-default mx-1 text-light",href:"#",onClick:function(t){t.preventDefault(),g(e)},title:"Click to delete"},e)})))),a.createElement(o.Z,null,a.createElement(c.Z,null,!!n&&a.createElement("div",{className:"invalid-feedback d-block"},a.createElement("strong",null,n)))),a.createElement(o.Z,{className:"mt-2"},a.createElement(c.Z,null,a.createElement(d.Z,null,a.createElement(p.Wf,{filterBy:function(){return!0},id:"tags-manager-add-tag-input",isLoading:M,options:L,onSearch:function(e){return C(void 0,void 0,void 0,(function(){var t;return x(this,(function(n){switch(n.label){case 0:N(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,h().post(E()("tag.typeahead"),{query:e})];case 2:return t=n.sent(),D(t.data),[3,4];case 3:return n.sent(),D([]),[3,4];case 4:return N(!1),[2]}}))}))},onChange:function(e){return S(e)},onKeyDown:function(e){var t,n=e;"Enter"!==n.code&&"NumpadEnter"!==n.code||(O(n.target.value),null===(t=A.current)||void 0===t||t.clear())},selected:T,minLength:3,className:"text-dark",placeholder:"Add new tag (category: tag)",ref:A,allowNew:!0}),a.createElement(u.Z,{addonType:"append"},a.createElement(m.Z,null,a.createElement("a",{className:"text-primary",href:"#",onClick:function(e){e.preventDefault(),O(function(e){if(e.length>0){if("object"===y(e[0]))return e[0].label;if("string"==typeof e[0])return e[0]}}(T))}},a.createElement("i",{className:"fas fa-plus"})))))))))}},94456:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Me});var a=n(67294),r=n(53407),i=n(15538),l=n(82669),o=n(67954),c=n(51252),s=n(609),d=n(70474),u=n(98595),m=n(10267),f=n(77243),v=n(53999),p=n(98008),g=n(56941),h=n(38089),b=n(91121),E=n(51636),y=n(94184),C=n.n(y),x=n(21140),w=n.n(x),A=n(20527),k=n.n(A),M=n(63893),N=n(47181),Z=n.n(N),T=n(79582),S=n.n(T),B=n(72922),L=n.n(B),D=n(77869),O=n.n(D),I=n(516),P=n.n(I),_=(n(35143),n(37226),n(62480),n(89286),n(22956),n(88129)),j=n.n(_),R=function(e,t){for(var n=0,a=t.length,r=e.length;n<a;n++,r++)e[r]=t[n];return e};function U(e){var t=/\)+$/.exec(e);if(t){for(var n=0,a=0,r=e;a<r.length;a++){var i=r[a];"("===i?n<0?n=1:n+=1:")"===i&&(n-=1)}if(n<0){var l=Math.min(-n,t[0].length);return e.substring(0,e.length-l)}}return e}function F(e){return e.replace(/&[A-Za-z0-9]+;$/,"")}const J=function(e){return R(R(R([],function(e){for(var t,n=new RegExp("(www|https?://).(?:[w-]+.)*[A-Za-z0-9-]+.[A-Za-z0-9-]+[^<\\s]*[^<?!.,:*_?~\\s]","g"),a=[];t=n.exec(e);){var r=F(U(t[0])),i="www"===t[1]?"http://":"";a.push({text:r,range:[t.index,t.index+r.length-1],url:""+i+r})}return a}(e)),function(e){for(var t,n=new RegExp("[\\w.+-]+@(?:[\\w-]+\\.)+[\\w-]+","g"),a=[];t=n.exec(e);){var r=t[0];/[_-]+$/.test(r)||a.push({text:r,range:[t.index,t.index+r.length-1],url:"mailto:"+r})}return a}(e)),function(e){for(var t,n=new RegExp("<@([A-Za-z0-9_-]+)>","g"),a=[];t=n.exec(e);)a.push({text:t[1],range:[t.index,t.index+t[0].length-1],url:j()("wiki.show",t[1])});return a}(e)).sort((function(e,t){return e.range[0]-t.range[0]}))};var q=a.createContext();function K(){return(0,a.useContext)(q)}const z=function(e){var t=e.children,n=(0,a.useRef)(null);return a.createElement(q.Provider,{value:n},t)};function W(e){e.setCodeBlockLanguages(["KaTeX"]),Object.getPrototypeOf(e).constructor.codeBlockManager.setReplacer("KaTeX",(function(e){return"<div>"+k().renderToString(e,{throwOnError:!1})+"</div>"}))}function Y(e){e.setCodeBlockLanguages(["mermaid"]),Object.getPrototypeOf(e).constructor.codeBlockManager.setReplacer("mermaid",(function(e){var t,n="mermaid-"+Math.random().toString(36).substr(2,10);try{return"<div>"+w().render(n,e)+"</div>"}catch(e){return null===(t=document.querySelector("#d"+n))||void 0===t||t.remove(),'<div class="text-danger">Error: '+e.message+"</div>"}}))}function X(e){e.setCodeBlockLanguages(["SciKi"]),Object.getPrototypeOf(e).constructor.codeBlockManager.setReplacer("SciKi",(function(e){var t="sciki-"+Math.random().toString(36).substr(2,10);try{var n=JSON.parse(e);return setTimeout((function(){var e=document.querySelector("#"+t);try{P()(n,e,{expanded:!0})}catch(t){e.innerHTML='<div class="text-danger">Error: '+t.message+"</div>"}}),0),'<div><strong>SciKi Component:</strong><div id="'+t+'"></div></div>'}catch(e){return'<div class="text-danger">Error: '+e.message+"</div>"}}))}var G={pluginFn:function(e){e.eventManager.addEventType("clickAddTOC"),e.eventManager.listen("clickAddTOC",(function(){e.insertText("[TOC]")})),e.getUI().getToolbar().addItem({type:"button",options:{className:"addTOC",event:"clickAddTOC",tooltip:"Add table of content",text:"T",style:"background: none; color: black; font-weight: bold"}});var t=e.getUI().createPopup({header:!0,title:"Add note/citation",content:'\n    <label for="ref">Identifier</label>\n    <input name="ref" type="text" class="te-ref-input" />\n    <label for="noteText">Text</label>\n    <input name="noteText" type="text" class="te-note-text-input" />\n    <div class="te-button-section">\n        <button type="button" class="te-ok-button" style="width: auto; padding: 0px 14px 0px 15px; height: 28px;">OK</button>\n        <button type="button" class="te-close-button" style="width: auto; padding: 0px 14px 0px 15px; height: 28px;">Cancel</button>\n    </div>\n',className:"tui-popup-add-note tui-editor-popup",modal:!1,target:e.getUI().getToolbar().el,css:{width:"auto",position:"absolute"}});e.eventManager.addEventType("clickAddNoteButton"),e.eventManager.listen("clickAddNoteButton",(function(){t.isShow()?t.hide():(e.eventManager.emit("closeAllPopup"),t.show())}));var n=t.el.querySelector(".te-ref-input"),a=t.el.querySelector(".te-note-text-input");e.addCommand("markdown",{name:"add_note",exec:function(t,n,a){var r=t.getEditor(),i=r.getCursor();e.moveCursorToEnd(),e.insertText("\n[^"+n+"]: "+a),r.setCursor(i)}}),t.el.querySelector(".te-close-button").addEventListener("click",(function(){n.value="",a.value="",t.hide()})),t.el.querySelector(".te-ok-button").addEventListener("click",(function(){""!=n.value&&(e.insertText("[^"+n.value+"]"),""!=a.value&&e.exec("add_note",n.value,a.value),n.value="",a.value=""),t.hide()})),e.getUI().getToolbar().addItem({type:"button",options:{className:"addNote",event:"clickAddNoteButton",tooltip:"Add note/citation",text:"N",style:"background: none; color: black; font-weight: bold"}})},renderer:{codeBlock:function(e,t){var n=(0,t.origin)();if("SciKiMedia"!==e.info)return n;if(5===n.length){var a=n[2];try{var r=JSON.parse(a.content);return[{type:"openTag",tagName:"div",classNames:["figure","right"===r.position?"fig_right":"fig_left"],attributes:n[0].attributes},{type:"html",content:'<div class="fig_container"><a href="'+j()("page.media.show",r.media)+'" class="fig"><img src="'+j()("page.media.image",r.media)+'" alt="'+r.caption+'"></a><div class="fig_caption">'+r.caption+"</div></div>"},{type:"closeTag",tagName:"div"}]}catch(e){return[{type:"openTag",tagName:"div",classNames:["text-danger"],attributes:n[0].attributes},{type:"text",content:"Error: "+e.message},{type:"closeTag",tagName:"div"}]}}return n}},parser:{image:function(e,t){if(t.entering){var n=e.destination;n.startsWith("#")&&n.endsWith("#")&&(e.destination=j()("page.media.image",n.substr(1,n.length-2)),e.orgDestination=n)}},link:function(e,t){if(t.entering){var n=e.destination;n.startsWith("@")&&(e.destination=j()("wiki.show",n.substr(1)),e.orgDestination=n)}}}};const H=function(e){var t=e.value,n=e.onChange,r=K();return a.createElement(a.Fragment,null,a.createElement(M.Editor,{initialValue:t,previewStyle:"tab",height:"600px",initialEditType:"markdown",useCommandShortcut:!0,usageStatistics:!1,hideModeSwitch:!0,extendedAutolinks:J,onChange:function(){var e,t;return n(null!==(t=null===(e=r.current)||void 0===e?void 0:e.getInstance().getMarkdown())&&void 0!==t?t:"")},plugins:[X,L(),Y,Z(),W,[S(),{hljs:O()}],G],ref:r}))};var V=n(55302),$=n(85677),Q=n(97975),ee=n(49429),te=n.n(ee),ne=n(6116),ae=n.n(ne),re=n(19167),ie=n.n(re),le=n(1705),oe=n(4389),ce=n(74855),se=(n(16407),n(83383),n(64284),n(93379)),de=n.n(se),ue=n(93651),me={insert:"head",singleton:!1};de()(ue.Z,me);ue.Z.locals;var fe=n(9669),ve=n.n(fe),pe=function(){return(pe=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},ge=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function l(e){try{c(a.next(e))}catch(e){i(e)}}function o(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}c((a=a.apply(e,t||[])).next())}))},he=function(e,t){var n,a,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,a=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(r=l.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};const be=function(e){var t,n,r,i,u,f,v,p,E,y,x,w,A,k,M,N=e.currentPageSlug,Z=e.media,T=e.enableFeatured,S=void 0!==T&&T,B=e.featuredId,L=e.deletedMedia,D=e.onMediaUpload,O=e.onMediaUpdate,I=e.onMediaSelect,P=e.onFeaturedSelect,_=e.onMediaDelete,R=S&&P,U=(0,a.useRef)(null),F=(0,a.useRef)(null),J=(0,le.vo)((function(){var e=new(te().Uppy)({restrictions:{allowedFileTypes:["image/*"]}});return e.use(ae(),{fieldName:"file",endpoint:j()("page.media.upload",N),headers:{"X-XSRF-TOKEN":oe.get("XSRF-TOKEN"),accept:"application/json"},getResponseError:function(e,t){var n=JSON.parse(e);return 422===t.status&&n.errors&&n.errors.file?Array.isArray(n.errors.file)&&n.errors.file[0]?new Error(n.errors.file[0]||"Unknown error"):new Error(n.errors.file||"Unknown error"):new Error((null==n?void 0:n.message)||"Unknown error")}}),e.use(ie(),{quality:.8}),e.on("upload-success",(function(e,t){D(t.body.media)})),e})),q=(0,a.useState)(!1),K=q[0],z=q[1],W=(0,a.useState)({open:!1}),Y=W[0],X=W[1],G=function(){return X((function(e){return pe(pe({},e),{open:!e.open})}))},H=function(e){return X((function(t){return pe(pe({},t),{processing:e})}))};return a.createElement(a.Fragment,null,a.createElement(m.Z,null,a.createElement(c.Z,{className:"mb-5 mb-xl-2",md:"12"},a.createElement(g.Z,{className:"bg-gradient-dark shadow"},a.createElement(h.Z,{className:"bg-transparent"},a.createElement(m.Z,{className:"justify-content-between align-items-center"},a.createElement("div",{className:"col"},a.createElement("h6",{className:"text-uppercase text-light ls-1 mb-1"},"Page Media")),a.createElement("div",{className:"col d-flex justify-content-end"},a.createElement("a",{className:"btn btn-outline-light btn-sm",href:"#",onClick:function(e){e.preventDefault(),z(!0)}},a.createElement("i",{className:"fas fa-plus mr-2"}),"Add media")))),a.createElement(b.Z,null,a.createElement("div",{className:"MediaManagerList overflow-auto",style:{maxHeight:"200px"}},Object.values(Z).filter((function(e){return!L.includes(e.uuid)})).map((function(e){return a.createElement("div",{key:e.uuid},a.createElement("div",{className:"PreviewContainer",style:{background:"url('"+e.thumbs.large+"') no-repeat center center"},onClick:function(){return I(e)}},a.createElement("div",{className:"text-green opacity-10"},a.createElement("i",{className:"fas fa-2x fa-check"}))),a.createElement("div",{className:"TitleContainer"},a.createElement("div",{className:"text-light",title:e.title},e.title),a.createElement("div",null,a.createElement(ce.CopyToClipboard,{text:e.uuid},a.createElement("a",{id:"CopyToClipboardMediaTooltip"+e.uuid,href:"#",onClick:function(e){return e.preventDefault()},title:"Copy Id to Clipboard"},a.createElement("i",{className:"fas fa-clipboard"}))),a.createElement(V.Z,{placement:"auto",target:"CopyToClipboardMediaTooltip"+e.uuid},"Copy Id to Clipboard")),R&&a.createElement("div",null,a.createElement("a",{id:"FeatureMediaTooltip"+e.uuid,href:"#",onClick:function(t){t.preventDefault(),P&&P(e)},className:"text-danger",title:"Mark as featured"},B===e.id?a.createElement("i",{className:"fas fa-star"}):a.createElement("i",{className:"far fa-star"})),a.createElement(V.Z,{placement:"auto",target:"FeatureMediaTooltip"+e.uuid},"Mark as featured")),a.createElement("div",null,a.createElement("a",{id:"EditMediaTooltip"+e.uuid,href:"#",onClick:function(t){t.preventDefault(),X({open:!0,media:e})},title:"Edit media"},a.createElement("i",{className:"fas fa-pencil-alt"})),a.createElement(V.Z,{placement:"auto",target:"EditMediaTooltip"+e.uuid},"Edit Title and Legend")),a.createElement("div",null,a.createElement("a",{id:"DeleteMediaTooltip"+e.uuid,href:"#",onClick:function(t){t.preventDefault(),_(e.uuid)},className:"text-danger",title:"Delete media"},a.createElement("i",{className:"fas fa-trash"})),a.createElement(V.Z,{placement:"auto",target:"DeleteMediaTooltip"+e.uuid},"Delete media"))))}))))))),a.createElement(le.j6,{uppy:J,closeModalOnClickOutside:!0,open:K,onRequestClose:function(){return z(!1)},fileManagerSelectionType:"files",theme:"dark",plugins:["ImageEditor"]}),a.createElement($.Z,{className:"modal-dialog-centered",isOpen:Y.open,toggle:G},a.createElement("div",{className:"modal-header"},a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"Edit ",null===(t=Y.media)||void 0===t?void 0:t.title),a.createElement("button",{"aria-label":"Close",className:"close","data-dismiss":"modal",type:"button",onClick:G},a.createElement("span",{"aria-hidden":!0},"Ã—"))),a.createElement("div",{className:"modal-body"},a.createElement(l.Z,{className:C()({"has-danger":(null===(n=Y.errors)||void 0===n?void 0:n.title)&&!!(null===(r=Y.errors)||void 0===r?void 0:r.title[0])})},a.createElement(o.Z,{for:"mediaTitle"},"Title"),a.createElement(s.Z,{name:"mediaTitle",placeholder:"Insert title here",type:"text",innerRef:U,invalid:(null===(i=Y.errors)||void 0===i?void 0:i.title)&&!!(null===(u=Y.errors)||void 0===u?void 0:u.title[0]),defaultValue:null===(f=Y.media)||void 0===f?void 0:f.title}),a.createElement(d.Z,{tag:"span",className:"invalid-feedback"},a.createElement("strong",null,(null===(v=Y.errors)||void 0===v?void 0:v.title)&&(null===(p=Y.errors)||void 0===p?void 0:p.title[0])))),a.createElement(l.Z,{className:C()({"has-danger":(null===(E=Y.errors)||void 0===E?void 0:E.legend)&&!!(null===(y=Y.errors)||void 0===y?void 0:y.legend[0])})},a.createElement(o.Z,{for:"mediaLegend"},"Legend"),a.createElement(s.Z,{name:"mediaLegend",placeholder:"Insert the legend here",type:"textarea",innerRef:F,invalid:(null===(x=Y.errors)||void 0===x?void 0:x.legend)&&!!(null===(w=Y.errors)||void 0===w?void 0:w.legend[0]),defaultValue:null===(A=Y.media)||void 0===A?void 0:A.legend}),a.createElement(d.Z,{tag:"span",className:"invalid-feedback"},a.createElement("strong",null,(null===(k=Y.errors)||void 0===k?void 0:k.legend)&&(null===(M=Y.errors)||void 0===M?void 0:M.legend[0]))))),a.createElement("div",{className:"modal-footer"},a.createElement(Q.Z,{color:"secondary","data-dismiss":"modal",type:"button",onClick:G},"Close"),a.createElement(Q.Z,{color:"primary",type:"button",disabled:Y.processing,onClick:function(e){return ge(void 0,void 0,void 0,(function(){var t,n,a,r,i,l;return he(this,(function(o){switch(o.label){case 0:e.preventDefault(),H(!0),o.label=1;case 1:return o.trys.push([1,3,,4]),X({open:!1}),[4,ve().put(j()("page.media.update",[N,(null===(r=Y.media)||void 0===r?void 0:r.uuid)||""]),{title:null===(i=null==U?void 0:U.current)||void 0===i?void 0:i.value,legend:null===(l=null==F?void 0:F.current)||void 0===l?void 0:l.value})];case 2:return t=o.sent(),n=t.data.media,O(n),[3,4];case 3:return(a=o.sent()).response.data.errors&&X((function(e){return pe(pe({},e),{errors:a.response.data.errors})})),[3,4];case 4:return H(!1),[2]}}))}))}},a.createElement("i",{className:Y.processing?"fas fa-spinner fa-spin mr-2":"fa fa-save mr-2"}),"Save changes"))))};var Ee=n(9680),ye=(n(6855),n(19555)),Ce=function(){return(Ce=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},xe=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function l(e){try{c(a.next(e))}catch(e){i(e)}}function o(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}c((a=a.apply(e,t||[])).next())}))},we=function(e,t){var n,a,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,a=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(r=l.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},Ae=function(e,t){for(var n=0,a=t.length,r=e.length;n<a;n++,r++)e[r]=t[n];return e},ke=function(e){var t=e.page,n=t.slug,y=t.title,x=t.content,w=t.draft,A=t.featured_image_id,k=e.formatted_tags,M=e.media,N=K(),Z=(0,E.cI)({title:y,content:x,tags:k,media:M,featured_image_id:A,deletedMedia:[]}),T=Z.data,S=Z.setData,B=Z.errors,L=Z.put,D=Z.processing,O=function(e){return xe(void 0,void 0,void 0,(function(){return we(this,(function(t){switch(t.label){case 0:return e.preventDefault(),[4,L(j()("page.update",n))];case 1:return t.sent(),[2]}}))}))};return a.createElement(i.Z,{onSubmit:O},a.createElement(r.Z,{title:a.createElement(l.Z,{className:C()("align-items-start",{"has-danger":!!B.title}),row:!0},a.createElement(o.Z,{for:"page-title",sm:"auto",className:"text-light p-0 m-0",style:{fontSize:"0.7em"}},"Title:"),a.createElement(c.Z,{sm:"auto",className:"flex-grow-1"},a.createElement(s.Z,{className:"form-control-alternative bg-light text-dark",type:"text",invalid:!!B.title,value:T.title,onChange:function(e){return S("title",e.target.value)}}),a.createElement(d.Z,{className:"invalid-feedback text-sm"},a.createElement("strong",null,B.title))))}),a.createElement(u.Z,{className:"mt--7",fluid:!0},a.createElement(m.Z,{className:"mb-2"},a.createElement(c.Z,{lg:12,className:"text-right"},a.createElement(f.Z,{className:"nav-fill flex-column-reverse flex-sm-row-reverse",pills:!0},w&&a.createElement(v.Z,{className:"ml-2 flex-grow-0"},a.createElement(p.Z,{className:"mb-sm-3 mb-md-0 text-green",onClick:function(e){return e.preventDefault(),Ee.Inertia.put(j()("page.publish",n))},disabled:D,href:"#"},a.createElement("i",{className:"fas fa-upload mr-2"}),"Publish")),!w&&a.createElement(v.Z,{className:"ml-2 flex-grow-0"},a.createElement(p.Z,{className:"mb-sm-3 mb-md-0 text-orange",onClick:function(e){return e.preventDefault(),Ee.Inertia.put(j()("page.draft",n))},disabled:D,href:"#"},a.createElement("i",{className:"fas fa-pencil-alt mr-2"}),"Revert to Draft")),a.createElement(v.Z,{className:"flex-grow-0"},a.createElement(p.Z,{className:"mb-sm-3 mb-md-0",onClick:O,disabled:D,href:"#"},a.createElement("i",{className:"fas fa-save mr-2"}),"Save"))))),a.createElement(m.Z,null,a.createElement(c.Z,{className:"mb-5 mb-xl-2",xl:"8"},a.createElement(g.Z,{className:"shadow"},a.createElement(h.Z,{className:"bg-transparent"},a.createElement("h6",{className:"text-uppercase text-dark ls-1 mb-1"},"Content")),a.createElement(b.Z,null,a.createElement(H,{value:x,onChange:function(e){return S("content",e)}}),!!B.content&&a.createElement("div",{className:"invalid-feedback d-block"},a.createElement("strong",null,B.content))))),a.createElement(c.Z,{className:"mb-5 mb-xl-2",xl:"4"},a.createElement(ye.Z,{tags:T.tags,onAddTag:function(e){return S((function(t){return Ce(Ce({},t),{tags:Ae(Ae([],t.tags.filter((function(t){return t!==e}))),[e])})}))},onDeleteTag:function(e){return S((function(t){return Ce(Ce({},t),{tags:t.tags.filter((function(t){return t!==e}))})}))}}))),a.createElement(be,{currentPageSlug:n,media:T.media,deletedMedia:T.deletedMedia,onMediaSelect:function(e){if(N.current){var t='\n```SciKiMedia\n{\n    "media": "'+e.uuid+'",\n    "position": "left",\n    "caption": "'+e.title+'"\n}\n```\n';N.current.getInstance().insertText(t)}},onMediaUpdate:function(e){S((function(t){var n=Ce(Ce({},t),{media:Ce({},t.media)});return n.media[e.uuid]=e,n}))},onMediaUpload:function(e){return S((function(t){var n;return Ce(Ce({},t),{media:Ce(Ce({},t.media),(n={},n[e.uuid]=e,n))})}))},onMediaDelete:function(e){return S((function(t){return Ce(Ce({},t),{deletedMedia:Ae(Ae([],t.deletedMedia),[e])})}))},enableFeatured:!0,featuredId:T.featured_image_id,onFeaturedSelect:function(e){return S("featured_image_id",e.id)}}),a.createElement(m.Z,null,a.createElement(c.Z,null,!!B.deletedMedia&&a.createElement("div",{className:"invalid-feedback d-block"},a.createElement("strong",null,B.deletedMedia))))))};const Me=function(e){return a.createElement(z,null,a.createElement(ke,Ce({},e)))}},93651:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(94015),r=n.n(a),i=n(23645),l=n.n(i)()(r());l.push([e.id,"div.MediaManagerList{display:grid;grid-gap:40px;grid-template-columns:repeat(auto-fit,minmax(128px,1fr));grid-auto-rows:128px}div.MediaManagerList>div{display:flex;flex-direction:column}div.MediaManagerList>div>div.PreviewContainer{flex-grow:1;display:flex;align-items:center;justify-content:center;background-size:contain!important;cursor:pointer}div.MediaManagerList>div>div.PreviewContainer>div{display:none}div.MediaManagerList>div>div.PreviewContainer:hover{opacity:.5}div.MediaManagerList>div>div.PreviewContainer:hover>div{display:block!important}div.MediaManagerList>div>div.TitleContainer{display:flex;flex-direction:row;font-size:.75rem!important}div.MediaManagerList>div>div.TitleContainer>div:first-child{flex-grow:1;overflow:hidden;text-overflow:ellipsis;text-align:center;white-space:nowrap}div.MediaManagerList>div>div.TitleContainer>div:nth-child(2){margin-left:.5rem;margin-right:.5rem}div.MediaManagerList>div>div.TitleContainer>div:nth-child(3),div.MediaManagerList>div>div.TitleContainer>div:nth-child(4){margin-right:.5rem}","",{version:3,sources:["webpack://./resources/css/Components/Wiki/MediaManager.css"],names:[],mappings:"AAAA,qBACI,YAAa,CACb,aAAc,CACd,wDAA2D,CAC3D,oBACJ,CAEA,yBACI,YAAa,CACb,qBACJ,CAEA,8CACI,WAAY,CACZ,YAAa,CAEb,kBAAmB,CACnB,sBAAuB,CACvB,iCAAmC,CACnC,cACJ,CAEA,kDACI,YACJ,CAEA,oDACI,UACJ,CAEA,wDACI,uBACJ,CAEA,4CACI,YAAa,CACb,kBAAmB,CACnB,0BACJ,CAEA,4DACI,WAAY,CACZ,eAAgB,CAChB,sBAAuB,CACvB,iBAAkB,CAClB,kBACJ,CAEA,6DACI,iBAAmB,CACnB,kBACJ,CAMA,0HACI,kBACJ",sourcesContent:["div.MediaManagerList {\n    display: grid;\n    grid-gap: 40px;\n    grid-template-columns: repeat(auto-fit, minmax(128px, 1fr));\n    grid-auto-rows: 128px;\n}\n\ndiv.MediaManagerList > div {\n    display: flex;\n    flex-direction: column;\n}\n\ndiv.MediaManagerList > div > div.PreviewContainer {\n    flex-grow: 1;\n    display: flex;\n    -ms-flex-align: center;\n    align-items: center;\n    justify-content: center;\n    background-size: contain !important;\n    cursor: pointer;\n}\n\ndiv.MediaManagerList > div > div.PreviewContainer > div {\n    display: none;\n}\n\ndiv.MediaManagerList > div > div.PreviewContainer:hover {\n    opacity: 0.5;\n}\n\ndiv.MediaManagerList > div > div.PreviewContainer:hover > div {\n    display: block !important;\n}\n\ndiv.MediaManagerList > div > div.TitleContainer {\n    display: flex;\n    flex-direction: row;\n    font-size: 0.75rem !important;\n}\n\ndiv.MediaManagerList > div > div.TitleContainer > div:first-child {\n    flex-grow: 1;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    text-align: center;\n    white-space: nowrap;\n}\n\ndiv.MediaManagerList > div > div.TitleContainer > div:nth-child(2) {\n    margin-left: 0.5rem;\n    margin-right: 0.5rem;\n}\n\ndiv.MediaManagerList > div > div.TitleContainer > div:nth-child(3) {\n    margin-right: 0.5rem;\n}\n\ndiv.MediaManagerList > div > div.TitleContainer > div:nth-child(4) {\n    margin-right: 0.5rem;\n}\n"],sourceRoot:""}]);const o=l},11748:(e,t,n)=>{var a={"./locale":89234,"./locale.js":89234};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=11748}}]);
//# sourceMappingURL=166.js.map?id=cfc28fe5a92faed85880