(self.webpackChunk=self.webpackChunk||[]).push([[729,464],{25729:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>B});var a=n(67294),l=n(10267),r=n(51252),o=n(56941),c=n(38089),i=n(91121),u=n(82669),s=n(67954),m=n(609),p=n(17354),d=n(69618),f=n(88822),h=n(51566),g=n(97975),v=n(55302),E=n(74855),y=(n(68236),n(89464)),b=n(96178),x=n(9669),Z=n.n(x),w=n(88129),N=n.n(w),k=(n(6855),function(){return(k=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)}),C=function(e,t,n,a){return new(n||(n=Promise))((function(l,r){function o(e){try{i(a.next(e))}catch(e){r(e)}}function c(e){try{i(a.throw(e))}catch(e){r(e)}}function i(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}i((a=a.apply(e,t||[])).next())}))},S=function(e,t){var n,a,l,r,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(l=2&r[0]?a.return:r[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,r[1])).done)return l;switch(a=0,l&&(r=[2&r[0],l.value]),r[0]){case 0:case 1:l=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(l=o.trys,(l=l.length>0&&l[l.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!l||r[1]>l[0]&&r[1]<l[3])){o.label=r[1];break}if(6===r[0]&&o.label<l[1]){o.label=l[1],l=r;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(r);break}l[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=l=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}},P=function(e,t){for(var n=0,a=t.length,l=e.length;n<a;n++,l++)e[l]=t[n];return e};const B=function(e){var t,n,x,w,B=e.simulation,O=e.canEditPages,j=e.selectedPathways,T=e.selectedNodes,F=(0,a.useRef)(null),A=(0,a.useState)(!1),H=A[0],z=A[1],D=(0,a.useState)([]),L=D[0],G=D[1],K=(0,a.useState)([]),M=K[0],R=K[1],q=Object.values(T).flatMap((function(e){return e})),J=(0,a.useState)(""),W=J[0],X=J[1],_=(0,a.useState)({plugin:"@Simulations:SimulationHeatmap",simulation:B,type:"pathways",mode:"top",sortBy:"perturbation",n:10,absolute:!1,limit:"none",attach:{tags:[],mode:"all",simulations:[]},title:"",height:600}),I=_[0],Q=_[1],U="pathways"===I.type?j:q,V=0===U.length,Y=V?" (Select at least one "+("pathways"===I.type?"pathway":"node")+" to enable)":"",$=function(){var e;if(L&&L.length>0){var t=L[0];t&&(Q((function(e){return k(k({},e),{attach:k(k({},e.attach),{tags:P(P([],e.attach.tags.filter((function(e){return e!==t}))),[t])})})})),null===(e=F.current)||void 0===e||e.clear())}},ee=function(e){return function(t){t.preventDefault(),Q((function(t){return k(k({},t),{attach:k(k({},t.attach),{tags:P([],t.attach.tags.filter((function(t){return t!==e})))})})}))}};return(0,a.useEffect)((function(){X("```SciKi\n"+JSON.stringify(k(k({},I),{selection:"selected"===I.mode?U:void 0}),void 0,2)+"\n```")}),[X,B,I,U]),a.createElement(a.Fragment,null,a.createElement(l.Z,null,a.createElement(r.Z,{xs:"12",xl:"8"},a.createElement(y.default,k({},I,{selection:"selected"===I.mode?U:void 0}))),a.createElement(r.Z,{xs:"12",xl:"4",className:"d-flex flex-column"},a.createElement(o.Z,{className:"bg-gradient-dark shadow mb-2 flex-grow-1"},a.createElement(c.Z,{className:"bg-transparent"},a.createElement("h6",{className:"text-uppercase text-light ls-1 mb-1"},"Change your heatmap")),a.createElement(i.Z,{className:"text-white-50"},a.createElement(u.Z,null,a.createElement(s.Z,{for:"input-title"},"Title"),a.createElement(m.Z,{id:"input-title",type:"text",value:I.title,onChange:function(e){return Q((function(t){return k(k({},t),{title:e.target.value})}))}})),a.createElement(u.Z,null,a.createElement(s.Z,{for:"input-height"},"Height"),a.createElement(m.Z,{id:"input-height",type:"number",value:I.height,onChange:function(e){return Q((function(t){return k(k({},t),{height:+e.target.value})}))}})),a.createElement(u.Z,null,a.createElement(s.Z,{for:"input-type"},"Type"),a.createElement(m.Z,{id:"input-type",type:"select",value:I.type,onChange:function(e){return Q((function(t){return k(k({},t),{type:"pathways"===e.target.value?"pathways":"nodes"})}))}},a.createElement("option",{value:"pathways"},"Pathways"),a.createElement("option",{value:"nodes"},"Nodes"))),a.createElement(u.Z,null,a.createElement(s.Z,{for:"input-sortBy"},"Sort by"),a.createElement(m.Z,{id:"input-sortBy",type:"select",value:I.sortBy,onChange:function(e){return Q((function(t){return k(k({},t),{sortBy:"perturbation"===e.target.value?"perturbation":"activity"})}))}},a.createElement("option",{value:"perturbation"},"Perturbation"),a.createElement("option",{value:"activity"},"Activity"))),a.createElement(u.Z,null,a.createElement(s.Z,{for:"input-mode"},"Mode"),a.createElement(m.Z,{id:"input-mode",type:"select",value:I.mode,onChange:function(e){return Q((function(t){return k(k({},t),{mode:"top"===e.target.value?"top":"selected"})}))}},a.createElement("option",{value:"top"},"Top-N"),a.createElement("option",{value:"selected",disabled:V},"Selected"+Y))),"top"===I.mode&&a.createElement(a.Fragment,null,a.createElement(u.Z,null,a.createElement(s.Z,{for:"input-number"},"Number of top ",I.type),a.createElement(m.Z,{id:"input-number",type:"number",value:I.n,onChange:function(e){return Q((function(t){return k(k({},t),{n:+e.target.value})}))}})),a.createElement("div",{className:"custom-control custom-checkbox mb-3"},a.createElement("input",{className:"custom-control-input",id:"check-absolute",checked:I.absolute,type:"checkbox",onChange:function(e){return Q((function(t){return k(k({},t),{absolute:e.target.checked})}))}}),a.createElement("label",{className:"custom-control-label",htmlFor:"check-absolute"},"Sort by absolute value?")),a.createElement(u.Z,null,a.createElement(s.Z,{for:"input-limit"},"Limit selection"),a.createElement(m.Z,{id:"input-limit",type:"select",value:I.limit,onChange:function(e){return Q((function(t){return k(k({},t),{limit:e.target.value})}))}},a.createElement("option",{value:"none"},"None"),a.createElement("option",{value:"positive"},"Positive values"),a.createElement("option",{value:"negative"},"Negative values")))))))),a.createElement(l.Z,null,a.createElement(r.Z,{xs:"12",xl:O?"8":"12"},a.createElement(o.Z,{className:"bg-gradient-dark shadow flex-grow-1"},a.createElement(c.Z,{className:"bg-transparent"},a.createElement("h6",{className:"text-uppercase text-light ls-1 mb-1"},"Add columns")),a.createElement(i.Z,null,a.createElement("div",{className:"d-flex flex-row justify-content-start align-items-center text-sm text-white-50 flex-wrap"},a.createElement("div",null,"Add a column for each simulation having"),a.createElement(m.Z,{type:"select",value:null!==(n=null===(t=I.attach)||void 0===t?void 0:t.mode)&&void 0!==n?n:"all",className:"form-control-sm mx-2",style:{width:"auto"},onChange:function(e){return Q((function(t){return k(k({},t),{attach:k(k({},I.attach),{mode:"all"===e.target.value?"all":"any"})})}))}},a.createElement("option",{value:"all"},"all"),a.createElement("option",{value:"any"},"any")),a.createElement("div",null,"tags:")),a.createElement(l.Z,null,a.createElement(r.Z,{style:{height:"100px"},className:"overflow-auto"},null===(w=null===(x=I.attach)||void 0===x?void 0:x.tags)||void 0===w?void 0:w.map((function(e){return a.createElement(p.Z,{key:e,className:"badge-default mx-1 text-light",href:"#",onClick:ee(e),title:"Click to delete"},e)})))),a.createElement(l.Z,{className:"mt-2"},a.createElement(r.Z,null,a.createElement(d.Z,null,a.createElement(b.Wf,{filterBy:function(){return!0},id:"tags-add-tag-input",isLoading:H,options:M,onSearch:function(e){return C(void 0,void 0,void 0,(function(){var t;return S(this,(function(n){switch(n.label){case 0:z(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,Z().post(N()("tag.typeahead"),{query:e})];case 2:return t=n.sent(),R(t.data),[3,4];case 3:return n.sent(),R([]),[3,4];case 4:return z(!1),[2]}}))}))},onChange:function(e){return G(e)},onKeyDown:function(e){var t=e;"Enter"!==t.code&&"NumpadEnter"!==t.code||$()},selected:L,minLength:3,className:"text-dark",placeholder:"Add new tag (category: tag)",ref:F}),a.createElement(f.Z,{addonType:"append"},a.createElement(h.Z,null,a.createElement("a",{className:"text-primary",href:"#",onClick:function(e){e.preventDefault(),$()}},a.createElement("i",{className:"fas fa-plus"})))))))))),O&&a.createElement(r.Z,{xs:"12",xl:"4"},a.createElement(o.Z,{className:"bg-gradient-dark shadow flex-grow-1"},a.createElement(c.Z,{className:"bg-transparent"},a.createElement("div",{className:"d-flex flex-row justify-content-between align-items-center"},a.createElement("h6",{className:"text-uppercase text-light ls-1 mb-1"},"Get the code"),a.createElement(E.CopyToClipboard,{text:W},a.createElement(g.Z,{className:"btn btn-sm btn-link",id:"get-code-tooltip",type:"button"},a.createElement("i",{className:"fas fa-clipboard"}))),a.createElement(v.Z,{delay:0,trigger:"hover focus",target:"get-code-tooltip"},"Copy To Clipboard"))),a.createElement(i.Z,null,a.createElement("code",{className:"text-wrap"},a.createElement("pre",{className:"text-white-50",style:{maxHeight:"150px",overflowX:"auto"}},W)))))))}},89464:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var a=n(67294),l=n(9669),r=n.n(l),o=n(88129),c=n.n(o),i=n(17834),u=n(58660),s=function(){return(s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)};const m=function(e){var t=e.simulation,n=e.title,l=e.height,o=void 0===l?600:l,m=e.type,p=void 0===m?"pathways":m,d=e.mode,f=void 0===d?"top":d,h=e.selection,g=e.sortBy,v=void 0===g?"perturbation":g,E=e.n,y=void 0===E?10:E,b=e.absolute,x=void 0!==b&&b,Z=e.limit,w=void 0===Z?"none":Z,N=e.attach,k=void 0===N?{}:N,C=(0,a.useState)({}),S=C[0],P=C[1],B=S.data,O=S.error,j=S.message;return(0,a.useEffect)((function(){r().post(c()("simulations.plugins.heatmap",t),{type:p,mode:f,selection:h,sort_by:v,n:y,absolute:x,limit:w,attach:k}).then((function(e){var t=e.data;P({data:t})})).catch((function(e){var t;P({error:!0,message:null!==(t=e.response.data.message)&&void 0!==t?t:e.message})}))}),[t,p,f,h,v,y,x,w,k]),O?a.createElement("p",{className:"text-red"},j):a.createElement(a.Fragment,null,!!B&&a.createElement(a.Fragment,null,a.createElement("div",{className:"d-flex flex-grow-1"},a.createElement(u.Z,{data:[s(s({},B),{type:"heatmap",colorscale:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(255,255,255)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]]})],layout:{font:{size:12},autosize:!0,title:n},config:{responsive:!0},style:{width:"100%",height:o+"px"},useResizeHandler:!0}))),!B&&a.createElement(i.Z,{color:"primary"},a.createElement("i",{className:"fas fa-circle-notch fa-spin mx-2"}),"Building image. Please wait..."))}}}]);
//# sourceMappingURL=729.js.map?id=cd006192797db4889df9