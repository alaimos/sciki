{"version":3,"sources":["webpack:///./resources/js/Components/Layout/Headers/DefaultHeader.tsx","webpack:///./resources/js/Modules/Simulations/Pages/Simulations/Index.tsx"],"names":["headerBg","title","className","fluid","lg","md","capabilities","canUpdatePages","simulations","canCreateSimulation","canPerformActions","simulationStates","useState","data","undefined","sizePerPage","page","totalSize","state","setState","useEffect","sortField","sortOrder","then","value","prevState","e","console","error","pagination","useMemo","alwaysShowAllBtns","showTotal","withFirstAndLast","sizePerPageRenderer","onSizePerPageChange","id","name","onChange","target","columns","dataField","text","sort","filter","formatter","_","row","options","unshift","headerStyle","width","push","isDummyField","can","update","href","placement","as","method","onClick","confirm","preventDefault","preserveState","view","expandRow","renderer","sm","user","formatted_tags","map","tag","key","showExpandColumn","expandColumnPosition","expandByColumnOnly","pills","keyField","remote","bootstrap4","bordered","defaultSorted","order","onTableChange","newState","filters","overlay","spinner"],"mappings":"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","file":"js/964.js?id=8835b6c4c4df35274361","sourcesContent":["import React from \"react\";\nimport { Container, Row, Col } from \"reactstrap\";\n\ninterface Props {\n    headerBg?: string;\n    title?: React.ReactNode;\n}\n\nconst DefaultHeader: React.FC<Props> = ({ headerBg, title }: Props) => {\n    return (\n        <>\n            <div\n                className={`header pb-8 pt-5 pt-lg-8 d-flex align-items-center ${\n                    headerBg ?? \"bg-gradient-gray-dark\"\n                }`}\n            >\n                <Container\n                    className=\"d-flex align-items-center flex-grow-1\"\n                    fluid\n                >\n                    <Row className=\"flex-grow-1\">\n                        <Col lg=\"7\" md=\"10\">\n                            <h1 className=\"display-2 text-white\">\n                                {title ?? \" \"}\n                            </h1>\n                        </Col>\n                    </Row>\n                </Container>\n            </div>\n        </>\n    );\n};\n\nexport default DefaultHeader;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport Header from \"../../../../Components/Layout/Headers/DefaultHeader\";\nimport {\n    Badge,\n    Card,\n    CardBody,\n    Col,\n    Container,\n    Nav,\n    NavItem,\n    NavLink,\n    Row,\n    UncontrolledTooltip,\n} from \"reactstrap\";\nimport type { CommonPageProps } from \"../../../../Types/page\";\nimport BootstrapTable, {\n    ColumnDescription,\n    ExpandRowProps,\n    SizePerPageRendererOptions,\n} from \"react-bootstrap-table-next\";\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\nimport filterFactory, {\n    selectFilter,\n    textFilter,\n} from \"react-bootstrap-table2-filter\";\nimport axios from \"axios\";\n// @ts-ignore\nimport overlayFactory from \"react-bootstrap-table2-overlay\";\nimport route from \"ziggy-js\";\nimport { InertiaLink } from \"@inertiajs/inertia-react\";\n\nimport \"react-bootstrap-table-next/dist/react-bootstrap-table2.min.css\";\nimport \"react-bootstrap-table2-paginator/dist/react-bootstrap-table2-paginator.min.css\";\nimport \"react-bootstrap-table2-filter/dist/react-bootstrap-table2-filter.min.css\";\n\ninterface Organism {\n    id: number;\n    name: string;\n}\n\ninterface State {\n    data?: Node[];\n    sizePerPage: number;\n    page: number;\n    totalSize: number;\n}\n\ninterface Props extends CommonPageProps {\n    organisms: Organism[];\n    states: { value: number; label: string }[];\n}\n\nconst Index: React.FC<Props> = ({\n    capabilities: {\n        pages: { update: canUpdatePages },\n        simulations: {\n            create: canCreateSimulation,\n            perform_actions: canPerformActions,\n        },\n    },\n    states: simulationStates,\n}: Props) => {\n    const [state, setState] = useState<State>({\n        data: undefined,\n        sizePerPage: 10,\n        page: 1,\n        totalSize: 0,\n    });\n\n    const { data, sizePerPage, page, totalSize } = state;\n\n    useEffect(() => {\n        if (data === undefined) {\n            axios\n                .post<State>(route(\"simulations.table\"), {\n                    sortField: \"created_at\",\n                    sortOrder: \"desc\",\n                })\n                .then((value) => {\n                    setState((prevState) => ({\n                        ...prevState,\n                        ...value.data,\n                    }));\n                })\n                .catch((e) => {\n                    console.error(e);\n                });\n        }\n    }, []);\n\n    const pagination = useMemo(\n        () =>\n            paginationFactory({\n                page,\n                totalSize,\n                sizePerPage,\n                alwaysShowAllBtns: true,\n                showTotal: true,\n                withFirstAndLast: false,\n                sizePerPageRenderer: ({\n                    onSizePerPageChange,\n                }: SizePerPageRendererOptions) => (\n                    <div\n                        className=\"dataTables_length\"\n                        id=\"datatable-basic_length\"\n                    >\n                        <label>\n                            Show{\" \"}\n                            {\n                                <select\n                                    name=\"datatable-basic_length\"\n                                    aria-controls=\"datatable-basic\"\n                                    className=\"form-control form-control-sm\"\n                                    onChange={(e) =>\n                                        onSizePerPageChange(+e.target.value, 1)\n                                    }\n                                >\n                                    <option value=\"10\">10</option>\n                                    <option value=\"25\">25</option>\n                                    <option value=\"50\">50</option>\n                                    <option value=\"100\">100</option>\n                                </select>\n                            }{\" \"}\n                            entries.\n                        </label>\n                    </div>\n                ),\n            }),\n        [page, totalSize, sizePerPage]\n    );\n\n    const columns: ColumnDescription[] = [\n        {\n            dataField: \"name\",\n            text: \"Name\",\n            sort: true,\n            filter: textFilter({\n                className: \"form-control-sm\",\n            }),\n        },\n        {\n            dataField: \"status\",\n            text: \"Status\",\n            sort: true,\n            formatter: (_, row) => row.readable_status,\n            filter: selectFilter({\n                options: simulationStates,\n                className: \"form-control-sm\",\n            }),\n        },\n        {\n            dataField: \"created_at\",\n            text: \"Created at\",\n            sort: true,\n            formatter: (_, row) => row.readable_created_at,\n        },\n    ];\n    if (canUpdatePages) {\n        columns.unshift({\n            dataField: \"id\",\n            text: \"Id\",\n            sort: true,\n            headerStyle: {\n                width: \"60px\",\n            },\n        });\n    }\n    if (canPerformActions) {\n        columns.push({\n            dataField: \"actions\",\n            isDummyField: true,\n            text: \"\",\n            sort: false,\n            headerStyle: {\n                width: \"120px\",\n            },\n            formatter: (_, row) => {\n                return (\n                    <>\n                        {row.can.update && !!row.public && (\n                            <>\n                                <InertiaLink\n                                    id={`make-private-link-${row.id}`}\n                                    href={route(\"simulations.publish\", row.id)}\n                                    className=\"btn btn-sm btn-link\"\n                                >\n                                    <i className=\"fas fa-unlock text-green\" />\n                                </InertiaLink>\n                                <UncontrolledTooltip\n                                    placement=\"auto\"\n                                    target={`make-private-link-${row.id}`}\n                                >\n                                    Click to make private\n                                </UncontrolledTooltip>\n                            </>\n                        )}\n                        {row.can.update && !row.public && (\n                            <>\n                                <InertiaLink\n                                    id={`publish-link-${row.id}`}\n                                    href={route(\"simulations.publish\", row.id)}\n                                    className=\"btn btn-sm btn-link\"\n                                >\n                                    <i className=\"fas fa-lock text-warning\" />\n                                </InertiaLink>\n                                <UncontrolledTooltip\n                                    placement=\"auto\"\n                                    target={`publish-link-${row.id}`}\n                                >\n                                    Click to make public\n                                </UncontrolledTooltip>\n                            </>\n                        )}\n                        {row.can.delete && (\n                            <>\n                                <InertiaLink\n                                    id={`delete-link-${row.id}`}\n                                    as=\"button\"\n                                    method=\"delete\"\n                                    href={route(\"simulations.destroy\", row.id)}\n                                    className=\"btn btn-sm btn-link\"\n                                    onClick={(e) => {\n                                        if (\n                                            !confirm(\n                                                \"Do you really want to delete this simulation?\"\n                                            )\n                                        ) {\n                                            e.preventDefault();\n                                        }\n                                    }}\n                                    preserveState={false}\n                                >\n                                    <i className=\"fas fa-trash text-danger\" />\n                                </InertiaLink>\n                                <UncontrolledTooltip\n                                    placement=\"auto\"\n                                    target={`delete-link-${row.id}`}\n                                >\n                                    Delete\n                                </UncontrolledTooltip>\n                            </>\n                        )}\n                    </>\n                );\n            },\n        });\n    }\n    columns.push({\n        dataField: \"view\",\n        isDummyField: true,\n        text: \"\",\n        sort: false,\n        headerStyle: {\n            width: \"60px\",\n        },\n        formatter: (_, row) => {\n            if (!row.can.view) return <></>;\n            return (\n                <>\n                    <InertiaLink\n                        id={`show-link-${row.id}`}\n                        href={route(\"simulations.show\", row.id)}\n                        className=\"btn btn-sm btn-link\"\n                    >\n                        <i className=\"fas fa-eye text-primary\" />\n                    </InertiaLink>\n                    <UncontrolledTooltip\n                        placement=\"auto\"\n                        target={`show-link-${row.id}`}\n                    >\n                        Show simulation\n                    </UncontrolledTooltip>\n                </>\n            );\n        },\n    });\n\n    const expandRow: ExpandRowProps<any, number> = {\n        renderer: (row) => (\n            <Row>\n                <Col sm=\"2\">Submitted by:</Col>\n                <Col sm=\"10\">\n                    <strong>{row.user.name}</strong>\n                </Col>\n                <Col sm=\"2\">Tags:</Col>\n                <Col sm=\"10\">\n                    {row.formatted_tags.map((tag: string) => (\n                        <Badge\n                            key={tag}\n                            className=\"badge-default mx-1 text-darker\"\n                        >\n                            {tag}\n                        </Badge>\n                    ))}\n                </Col>\n            </Row>\n        ),\n        showExpandColumn: true,\n        expandColumnPosition: \"left\",\n        expandByColumnOnly: true,\n    };\n\n    return (\n        <>\n            <Header title=\"Simulations\" />\n            <Container className=\"mt--7\" fluid>\n                {canCreateSimulation && (\n                    <Row className=\"mb-2\">\n                        <Col lg={12} className=\"text-right\">\n                            <Nav\n                                className=\"nav-fill flex-column-reverse flex-sm-row-reverse\"\n                                pills\n                            >\n                                <NavItem className=\"flex-grow-0\">\n                                    <NavLink\n                                        className=\"mb-sm-3 mb-md-0\"\n                                        tag={InertiaLink}\n                                        href={route(\"simulations.create\")}\n                                    >\n                                        <i className=\"fas fa-plus-square mr-2\" />\n                                        New simulation\n                                    </NavLink>\n                                </NavItem>\n                            </Nav>\n                        </Col>\n                    </Row>\n                )}\n                <Card className=\"shadow\">\n                    <CardBody>\n                        <div className=\"py-4\">\n                            <BootstrapTable\n                                keyField=\"id\"\n                                data={data ?? []}\n                                columns={columns}\n                                remote\n                                bootstrap4\n                                pagination={pagination}\n                                filter={filterFactory()}\n                                bordered={false}\n                                defaultSorted={[\n                                    {\n                                        dataField: \"created_at\",\n                                        order: \"desc\",\n                                    },\n                                ]}\n                                onTableChange={(_, newState) => {\n                                    axios\n                                        .post<State>(\n                                            route(\"simulations.table\"),\n                                            {\n                                                page: newState.page,\n                                                sizePerPage:\n                                                    newState.sizePerPage,\n                                                sortField: newState.sortField,\n                                                sortOrder: newState.sortOrder,\n                                                filters: newState.filters,\n                                            }\n                                        )\n                                        .then((value) => {\n                                            setState((prevState) => ({\n                                                ...prevState,\n                                                ...value.data,\n                                            }));\n                                        })\n                                        .catch((e) => {\n                                            console.error(e);\n                                        });\n                                }}\n                                overlay={overlayFactory({ spinner: true })}\n                                expandRow={expandRow}\n                            />\n                        </div>\n                    </CardBody>\n                </Card>\n            </Container>\n        </>\n    );\n};\n\nexport default Index;\n"],"sourceRoot":""}